C51 COMPILER V9.54   KEY                                                                   12/24/2017 14:10:29 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN .\Objects\key.obj
COMPILER INVOKED BY: C:\keil   55\C51\BIN\C51.EXE key.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\key
                    -.lst) TABS(2) OBJECT(.\Objects\key.obj)

line level    source

   1          #include <key.h>
   2          
   3          uchar s4,s5,s6=0,s7,ss=0;
   4          uchar normal,time,kongzai,guozai;
   5          uchar noise_flag=1,he_flag=1;
   6          
   7          void keyscan()
   8          {
   9   1        if(P33==0)
  10   1        {
  11   2          Delay5ms();
  12   2          if(P33==0)
  13   2          {
  14   3            if(normal==1)
  15   3             {s4=1;s6=0;ss=0;}
  16   3          }
  17   2          while(!P33);  
  18   2        }
  19   1        else if(P32==0)
  20   1        {
  21   2          Delay5ms();
  22   2          if(P32==0)
  23   2          {
  24   3            if((time>0)&&(s4==1))
  25   3            {
  26   4              if(s5==0) {s5=1;fengming(0x00);}
  27   4              else s5=0;
  28   4            }
  29   3          }
  30   2          while(!P32);  
  31   2        }
  32   1        else if(P31==0)
  33   1        {
  34   2          Delay5ms();
  35   2          if(P31==0)
  36   2          {
  37   3            if(kongzai==1)
  38   3            {
  39   4              s6=1;s4=0;
  40   4              if(ss<=3)
  41   4              ss++;
  42   4      //        if(ss<2)  //循环
  43   4      //        ss++;
  44   4      //        else ss=1;
  45   4            }
  46   3          }
  47   2          while(!P31);  
  48   2        }
  49   1        else if(P30==0)
  50   1        {
  51   2          Delay5ms();
  52   2          if(P30==0)
  53   2          { if((kongzai==1)&&(s6==1)) 
  54   3            s7=1;
C51 COMPILER V9.54   KEY                                                                   12/24/2017 14:10:29 PAGE 2   

  55   3          }
  56   2          while(!P30);  
  57   2        }  
  58   1      }
  59          void fengming(uchar xiang)   //适用于蜂鸣器和继电器不要求同时出现的情况 若要求同时出现 P0口的赋值需要重新考
             -虑
  60          {
  61   1        if((xiang==1)&&(noise_flag==1))
  62   1        {
  63   2          P2=P2&0x1f;
  64   2          P2=0xa0;
  65   2          P0=0x40;
  66   2          P2=P2&0x1f;
  67   2          noise_flag=0;
  68   2        }
  69   1        else if((xiang==0)&&(noise_flag==0))
  70   1        {
  71   2          P2=P2&0x1f;
  72   2          P2=0xa0;
  73   2          P0=0x00;
  74   2          P2=P2&0x1f;
  75   2          noise_flag=1;   
  76   2        } 
  77   1      }
  78          void jidian(uchar he)
  79          {
  80   1        if((he==1)&&(he_flag==1))
  81   1        {
  82   2          P2=P2&0x1f;
  83   2          P2=0xa0;
  84   2          P0=0x10;
  85   2          P2=P2&0x1f;
  86   2          he_flag=0;
  87   2        }
  88   1        else if((he==0)&&(he_flag==0))
  89   1        {
  90   2          P2=P2&0x1f;
  91   2          P2=0xa0;
  92   2          P0=0x00;
  93   2          P2=P2&0x1f;
  94   2          he_flag=1;    
  95   2        } 
  96   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    221    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
