C51 COMPILER V9.54   BSP_SEG                                                               12/11/2023 20:16:13 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BSP_SEG
OBJECT MODULE PLACED IN .\Objects\bsp_seg.obj
COMPILER INVOKED BY: D:\keil c51\C51\BIN\C51.EXE bsp_seg.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -bsp_seg.lst) OBJECT(.\Objects\bsp_seg.obj)

line level    source

   1          # include "bsp_seg.h"
   2          
   3          
   4          
   5          void Seg_Tran(unsigned char*Seg_String,unsigned char*Seg_Buf)
   6          {
   7   1              unsigned char i=0;
   8   1              unsigned char j=0;
   9   1              unsigned char temp;
  10   1              for(i=0;i<=7;i++,j++)
  11   1              {
  12   2                      switch(Seg_String[j])
  13   2                      {
  14   3                              case '0':  temp = 0xc0;break;
  15   3                              case '1':  temp = 0xf9;break;
  16   3                              case '2':  temp = 0xa4;break;
  17   3                              case '3':  temp = 0xb0;break;
  18   3                              case '4': temp = 0x99;break;
  19   3                              case '5': temp = 0x92;break;
  20   3                              case '6': temp = 0x82;break;
  21   3                              case '7': temp = 0xf8;break;
  22   3                              case '8': temp = 0x80;break;
  23   3                              case '9': temp = 0x90;break;
  24   3                              
  25   3                              case '-': temp = 0xbf;break;
  26   3                              case ' ' :temp = 0xff;break;
  27   3                              case 'A': temp = 0x88; break;
  28   3                              case 'B': temp = 0x83; break;
  29   3                              case 'C': temp = 0xc6; break;
  30   3                              case 'D': temp = 0xa1; break;
  31   3                              case 'E': temp = 0x86; break;
  32   3                              case 'F': temp = 0x8e; break;
  33   3                              
  34   3                              case 'H': temp = 0x89; break;
  35   3                              case 'L': temp = 0xC7; break;
  36   3                              case 'N': temp = 0xC8; break;
  37   3                              case 'P': temp = 0x8c; break;
  38   3                              case 'U': temp = 0xC1; break;
  39   3                              
  40   3                              default: temp = 0xff;break;
  41   3                      }
  42   2                      
  43   2                      if(Seg_String[j+1]=='.')
  44   2                      {
  45   3                              temp&=0x7f;
  46   3                              j++;
  47   3                      }
  48   2                      
  49   2                      
  50   2                      Seg_Buf[i] = temp;
  51   2              }
  52   1      }
  53          void Seg_Disp(unsigned char*Seg_Buf,unsigned char pos)
  54          {
C51 COMPILER V9.54   BSP_SEG                                                               12/11/2023 20:16:13 PAGE 2   

  55   1              P0 = 1<<pos;//位码送入
  56   1              P2 = P2 & 0x1F | 0xC0; // 0xC0，选通Y6，也就是位码的锁存器，将数据透传过去
  57   1              P2 &= 0x1F; //将打开的锁存器关闭，使任何一个锁存器都不打开      
  58   1              
  59   1              P0 = 0xff;//清空屏幕
  60   1              P2 = P2 & 0x1F | 0xE0; // 0xE0，选通Y7，也就是段码的锁存器，将数据透传过去
  61   1              P2 &= 0x1F; //将打开的锁存器关闭，使任何一个锁存器都不打开              
  62   1              
  63   1              P0 = Seg_Buf[pos];//段码送入
  64   1              P2 = P2 & 0x1F | 0xE0; // 0xE0，选通Y7，也就是段码的锁存器，将数据透传过去
  65   1              P2 &= 0x1F; 
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    340    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       9
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
