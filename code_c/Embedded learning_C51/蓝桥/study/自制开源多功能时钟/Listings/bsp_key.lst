C51 COMPILER V9.54   BSP_KEY                                                               12/10/2023 19:32:26 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BSP_KEY
OBJECT MODULE PLACED IN .\Objects\bsp_key.obj
COMPILER INVOKED BY: D:\keil c51\C51\BIN\C51.EXE bsp_key.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -bsp_key.lst) OBJECT(.\Objects\bsp_key.obj)

line level    source

   1          # include "bsp_key.h"
   2          
   3          //矩阵键盘
   4          unsigned char Scan_Key()
   5          {
   6   1              unsigned char temp;
   7   1              unsigned int KeyNum;
   8   1              P44 = 0; P42 = 1; P35 = 1; P34 = 1; 
   9   1              KeyNum = (KeyNum<<4)| P3&0xf;
  10   1              
  11   1              P44 = 1; P42 = 0; P35 = 1; P34 = 1; 
  12   1              KeyNum = (KeyNum<<4) | P3&0xf;
  13   1              
  14   1              P44 = 1; P42 = 1; P35 = 0; P34 = 1; 
  15   1              KeyNum = (KeyNum<<4) | P3&0xf;
  16   1              
  17   1              P44 = 1; P42 = 1; P35 = 1; P34 = 0; 
  18   1              KeyNum = (KeyNum<<4) | P3&0xf;
  19   1              switch(~KeyNum)
  20   1              {
  21   2                      case 0x8000 : temp = 4;break;
  22   2                      case 0x4000 : temp = 5;break;
  23   2                      case 0x2000 : temp = 6;break;
  24   2                      case 0x1000 : temp = 7;break;
  25   2                      
  26   2                      case 0x0800 : temp = 8;break;
  27   2                      case 0x0400 : temp = 9;break;
  28   2                      case 0x0200 : temp = 10;break;
  29   2                      case 0x0100 : temp = 11;break;
  30   2                      
  31   2                      case 0x0080 : temp = 12;break;
  32   2                      case 0x0040 : temp = 13;break;
  33   2                      case 0x0020 : temp = 14;break;
  34   2                      case 0x0010 : temp = 15;break;
  35   2                      
  36   2                      case 0x0008 : temp = 16;break;
  37   2                      case 0x0004 : temp = 17;break;
  38   2                      case 0x0002 : temp = 18;break;
  39   2                      case 0x0001 : temp = 19;break;
  40   2                  default: temp = 0;break;
  41   2              }
  42   1              return temp;
  43   1      }
  44          
  45          unsigned char Alone_Key()
  46          {
  47   1              unsigned char temp;//值不确定
  48   1              if(P30 == 0)temp = 1;
  49   1              else if(P31 == 0)temp = 2;
  50   1              else if(P32 == 0)temp = 3;
  51   1              else if(P33 == 0)temp = 4;
  52   1              return temp;
  53   1      }

C51 COMPILER V9.54   BSP_KEY                                                               12/10/2023 19:32:26 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    331    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
