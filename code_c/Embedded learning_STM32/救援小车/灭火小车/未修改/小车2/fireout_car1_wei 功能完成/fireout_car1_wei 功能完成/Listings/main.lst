C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "ultrasonic.h"
   2          #include "action.h"
   3          #include "motor.h"
   4          #include "key.h"
   5          
   6          
   7          
   8          /**********************å®šä¹‰æŸäº›ç®¡è„š********************/
   9          bit candle_fire_1=0x01;//  1 is fire on ; 0 is extinguish
  10          bit candle_fire_9=0x01;//  1 is fire on ; 0 is extinguish
  11          bit candle_fire_3=0x00;////  1 is fire on ; 0 is extinguish
  12          bit candle_fire_2=0x01;////  1 is fire on ; 0 is extinguish
  13          
  14          
  15          sbit Fan = P0^0;
  16          sbit LeftFire = P0^2;
  17          sbit RightFire = P0^3;
  18          
  19          #define Fan_On {Fan = 0;}
  20          #define Fan_Off {Fan = 1;}
  21          
  22          
  23          
  24          unsigned char prevent_time = 0;
  25          unsigned int left_300 = 0;
  26          unsigned int right_900 = 0;
  27          unsigned int pwm_num = 0;
  28          unsigned int room_2_pwm_num = 0;
  29          unsigned int left_time=0;
  30          
  31          
  32          /******************ä¸»å‡½æ•°***************
  33          **************å®ç°åŠŸèƒ½ç§»åŠ¨ç­ç«**********/
  34          void main()
  35          {
  36   1        LED = 1;//äº®ç¯æŒ‡ç¤º
  37   1        Timer0Init();//å·¦è½®PWM
  38   1        Timer1Init();//å³è½®PWM
  39   1        Ultrasonic_Init();
  40   1        while(1)
  41   1        { 
  42   2          keyscan();//æŒ‰é”®æ£€æµ‹
  43   2          if(start==1)
  44   2          {
  45   3            /**********************æµ‹è¯•å³è½¬180Â°********************/
  46   3      //        turn_right_180();
  47   3      //        car_stop(); 
  48   3      //      
  49   3      //        while(1);//for(;;);
  50   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  51   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  52   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  53   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  54   3            right_dis= Ultrasonic_Get_Right();//å¾—åˆ°ä¸€æ¬¡å³è¶…å£°æ³¢æµ‹è·æ¨¡å—çš„è·ç¦»
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 2   

  55   3            left_dis= Ultrasonic_Get_Left();//å¾—åˆ°ä¸€æ¬¡å·¦è¶…å£°æ³¢æµ‹è·æ¨¡å—çš„è·ç¦»
  56   3            right_dis= Ultrasonic_Get_Right();
  57   3            left_dis= Ultrasonic_Get_Left();
  58   3            right_dis= Ultrasonic_Get_Right();
  59   3            left_dis= Ultrasonic_Get_Left();
  60   3            
  61   3            
  62   3            goto aaa;//è·³è½¬aaa
  63   3          //////////////////
  64   3      aaa:
  65   3            if(candle_fire_1==0x01)
  66   3            {
  67   4              do                   
  68   4              { 
  69   5                Circulation_wall_right();               
  70   5              }
  71   4              while(front_dis > 182);
  72   4              //now position is fire 1,and next step find fire 1      
  73   4              car_stop(); 
  74   4              
  75   4                    
  76   4              ////find_fire_turn_right();
  77   4              //now position is fire 1,and next step put off  fire 1    
  78   4              car_stop();
  79   4              
  80   4              do
  81   4              {
  82   5                Fan_On;     //-----------------ç­1---------------------
  83   5                delay_ms(1500);
  84   5                break;
  85   5              }
  86   4              while(LeftFire==0||RightFire==0);
  87   4              
  88   4              //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
  89   4              do
  90   4              {
  91   5                Fan_On;
  92   5                delay_ms(1500);
  93   5                break;
  94   5              }
  95   4              while(LeftFire==0||RightFire==0);
  96   4                    
  97   4              //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
  98   4              
  99   4              Fan_Off;
 100   4              //////åŠ çš„
 101   4              delay_ms(150);
 102   4                //now position is fire 1,and next turn back       
 103   4                    
 104   4      //              find_fire_turn_back_left();
 105   4                    
 106   4                //now position is fire 1,and next turn left         
 107   4              car_stop();
 108   4              
 109   4              if(candle_fire_9==0x00&&candle_fire_3==0x00&&candle_fire_2==0x00)
 110   4              {
 111   5                turn_right_180();
 112   5                goto only_fire1_is_on_back_home;//ç­1è¿”èˆª
 113   5              }
 114   4              turn_left_90();//
 115   4              car_stop();
 116   4              
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 3   

 117   4            }
 118   3            else//----------------------1æ— ç«-----------------------
 119   3            {
 120   4              do                   //ä¸€å·æˆ¿é—´
 121   4              {
 122   5                Circulation_wall_right(); 
 123   5                //walkalone_left_1();               
 124   5              }
 125   4              while(front_dis > 182);//ç­ä¸€å·ç«çš„è·ç¦»
 126   4        //now position is fire 1,and next step find fire 1      
 127   4              car_stop();
 128   4              turn_left_90();//
 129   4            }
 130   3            /////////////////
 131   3      //
 132   3      //ä»1#ç€ç«ç‚¹å‡ºå‘ï¼Œå‡†å¤‡å¯»æ‰¾1#æˆ¿é—´çš„å¤§é—¨ä¸­å¤®ï¼Œä¼å›¾è¿›å…¥1å·æˆ¿é—´å¤§é—¨ã€‚
 133   3      //ä¸ºäº†é˜²æ­¢è¯¯åˆ¤ï¼Œæ£€æµ‹å¤§é—¨ï¼Œæ£€æµ‹ä¸¤æ¬¡ï¼ŒåŸå› æ˜¯åˆä¸€æ¬¡å‘ç°æµ‹ä¸å‡†è¿˜åœ¨1#ç€ç«ç‚¹ï¼Œ
             -å´è¯¯è®¤ä¸ºè‡ªå·±åœ¨1#å·æˆ¿é—´é—¨å£
 134   3      ////////////////////
 135   3              //now position is fire 1,and next walk alone withe the right wall 
 136   3               front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//å¡å°”æ›¼æ»¤æ³¢
 137   3               left_dis= Ultrasonic_Get_Left();
 138   3               right_dis= Ultrasonic_Get_Right();
 139   3               if(candle_fire_9==0x01)
 140   3               {
 141   4                  i=0;
 142   4                  do                   //ä¸€å·æˆ¿é—´
 143   4                  {
 144   5                    Circulation_wall_right();
 145   5                  }
 146   4                  while(i<=30);
 147   4                  //ä¸ºäº†é˜²æ­¢è¯¯åˆ¤ï¼Œå‘ç°ä¸€å·æˆ¿é—´é—¨å£ æ‰§è¡Œä¸¤æ¬¡ã€‚å› ä¸ºè°ƒè¯•è¿‡ç¨‹ä¸­åœ¨ç«ç„°1å¤„åº”
             -ä¸ºå‰æ–¹è¶…å£°æµ‹è·é”™è¯¯ï¼Œæµ‹æˆ514æ¯«ç±³ï¼Œå®é™…åº”ä¸º1200æ¯«ç±³
 148   4                  //ï¼Œå¯¼è‡´æ»¡è¶³while(front_dis > 550||left_dis <600)æ¡ä»¶ï¼Œæ˜¯çš„å•ç‰‡æœºæœ¬åœ¨ç«ç„°1è¯¯è®¤ä¸º
             -åœ¨ä¸€å·æˆ¿é—´é—¨å£ï¼Œæ‰€ä»¥å†™ä¸¤æ¬¡
 149   4                  //å¸Œæœ›å‰æ–¹è¶…å£°æµ‹è·ä¸è¦çŒœæµ‹é”™äº†ã€‚
 150   4                      
 151   4                  delay_ms(100);
 152   4                    
 153   4                  left_dis= Ultrasonic_Get_Left();//å·¦ä¾§æ£€æŸ¥
 154   4                  right_dis= Ultrasonic_Get_Right();//å³ä¾§æ£€æŸ¥
 155   4                  
 156   4                  do                   //è¿›å…¥ä¸€å·æˆ¿é—´å‰â€”â€”å¯»æ‰¾å³å¢™
 157   4                  {
 158   5                    Circulation_wall_right();
 159   5                    left_dis= Ultrasonic_Get_Left();
 160   5                  }
 161   4                  while(front_dis > 580||left_dis <600);  //front_dis=660
 162   4                  
 163   4                  car_stop();
 164   4                  //now position is middle gate of room 1,and next action turn left 
 165   4                  delay_ms(50);
 166   4      
 167   4                  //          
 168   4                  /////////////////
 169   4                  //
 170   4                  //åœ¨1#æˆ¿é—´å¤§é—¨ä¸­å¤®ã€‚å‡†å¤‡è¿›å…¥å¤§é—¨ï¼Œå¹¶å·¡å³å¢™ åœ¨ç¦»å¢™177æ¯«ç±³å¤„åœä¸‹æ¥
 171   4                  ////////////////////            
 172   4                      
 173   4                  turn_left_90();          //è¿›å…¥æˆ¿é—´1
 174   4                      
 175   4                  //now position is middle gate of room 1,and next action pass through gate and walk alone with right 
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 4   

             -wall         ///////////////  
 176   4                  do
 177   4                  {
 178   5                    Circulation_wall_right();     
 179   5                  }
 180   4                  while(front_dis > 230);//æ”¹ä¸º20-5.19ï¼Œ23-5.20
 181   4                  delay_ms(50);//-------------------
 182   4                //now position is corner 1 of room 1,and next action turn left
 183   4                  car_stop();
 184   4                  turn_left_90();             //å·¦è½¬
 185   4          //          
 186   4          /////////////////
 187   4          //
 188   4          //åœ¨1#æˆ¿é—´1å·æ‹è§’ï¼Œå‡†å¤‡å‰å¾€9#ç€ç«ç‚¹ã€‚å¹¶ç­ç«
 189   4          ////////////////////            
 190   4                      
 191   4                  //now position is corner 1 of room 1,and next action wanlk alone with right wall
 192   4                  do
 193   4                  {
 194   5                        Circulation_wall_right(); //å¯»å³å¢™   
 195   5                  }
 196   4                  while(front_dis > 210);//åŸæ•°æ®185æ”¹160-5.18ï¼Œ19-5.20,21-5.25
 197   4                  //now position is corner 2 of room 1,and next action find fire 2  
 198   4                  car_stop();
 199   4                  
 200   4                  //////begin find fire/////////////////////////
 201   4                  //
 202   4                  //car_stop();
 203   4      //                find_fire_turn_right();
 204   4                  
 205   4              //now position is corner 2 of room 1,and next action put off fire 2     
 206   4                      
 207   4                  do
 208   4                  {
 209   5                    Fan_On;     //-----------------ç­9ç«---------
 210   5                    delay_ms(1500);
 211   5                    break;
 212   5                  }
 213   4                  while(LeftFire==0||RightFire==0);
 214   4                  
 215   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 216   4                  do
 217   4                  {
 218   5                    Fan_On;
 219   5                    delay_ms(1500);
 220   5                    break;
 221   5                  }
 222   4                  while(LeftFire==0||RightFire==0);
 223   4                  
 224   4                      
 225   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
 226   4                  while(LeftFire==0||RightFire==0)
 227   4                  {
 228   5                    Fan_On;
 229   5                    delay_ms(1000);
 230   5                    break;
 231   5                  }
 232   4                      
 233   4                  Fan_Off;
 234   4                  //////åŠ çš„
 235   4                  delay_ms(100);
 236   4                  //now position is corner 2 of room 1,and next action turn back  
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 5   

 237   4      //                find_fire_turn_back_left();
 238   4                      
 239   4                      
 240   4                  //now position is corner 2 of room 1,and next action turn 180 degree  
 241   4                  car_stop();
 242   4                  turn_right_180();//å³è½¬æœ‰180Â°ä¸è¶³â€”â€”å·²è§£å†³
 243   4                  
 244   4                  
 245   4                  /******************************æœ‰è¯¯çš„åœ°æ–¹*******************************/
 246   4                  /*******************************å·²ç»è§£å†³********************************/
 247   4          /////////////////
 248   4          //
 249   4          //åœ¨9#ç€ç«ç‚¹ï¼Œå‡†å¤‡ç¦»å¼€ç€ç«ç‚¹ï¼Œå·¡å·¦å¢™ã€‚åœ¨ç¦»å¢™160æ¯«ç±³å¤„åœä¸‹æ¥
 250   4          ////////////////////              
 251   4                      ///////////////////////////////
 252   4                  //now position is corner 2 of room 1,and next action walk alone with left wall  
 253   4                    //-----------------é˜²è¯¯åˆ¤----------- 
 254   4                  i=0;
 255   4                  do
 256   4                  {
 257   5                    Circulation_wall_left();  //å¯»å·¦å¢™
 258   5                  }
 259   4                  while(left_dis < 390 && i < 24);//iåŸæ•°æ®ä¸º12æ”¹ä¸º-24ï¼Œ5-18
 260   4                  
 261   4                  
 262   4                //----------------------------------  
 263   4                  
 264   4                  do
 265   4                  {
 266   5                    Circulation_wall_left();  //å¯»å·¦å¢™   
 267   5                  }
 268   4                  while(front_dis > 230);//18cmï¼Œ230-5.20
 269   4                // turn right at the cornner 1  
 270   4                  car_stop();
 271   4                  turn_right_90();
 272   4                  
 273   4          //////////////////
 274   4            
 275   4      //å¼€æœºå‡ºå‘ï¼Œå·¡å³å¢™ï¼Œåœ¨ç¦»å¢™180æ¯«ç±³å¤„åœä¸‹
 276   4      //å¹¶åœ¨3#è¡—é“åœä¸‹æ¥ï¼Œç¦»å¢™180æ¯«ç±³åœã€‚
 277   4      // now potion is cornre 3 of  room 2,next action  walk alone right wall
 278   4          ///////////////////
 279   4                  /////////////////
 280   4          //
 281   4          //åœ¨1#æˆ¿é—´ï¼Œæ‹è§’1ï¼Œå‡†å¤‡ç¦»å¼€ä¸€å·æˆ¿é—´ï¼Œå·¡å·¦å¢™èµ°ï¼Œåœ¨ç¦»å¢™160æ¯«ç±³å¤„åœä¸‹æ¥
 282   4          ////////////////////  19å¹´æ”¹190           
 283   4      
 284   4                      
 285   4                    /// now postion is room 1 corner 1 and walk alone left wall  and next action stop at the street 
 286   4                  do
 287   4                  {
 288   5                    Circulation_wall_left();//å¯»å·¦å¢™     
 289   5                  }
 290   4                  while(front_dis > 190);//é©¶å‡ºåˆ°1å·æˆ¿é—´å‡ºå£1#è¡—åŒºå¤„å‰å¢™19cm
 291   4                  
 292   4                // now potion is street and nearby is the gate of room1 ,turn left 90 degree. 
 293   4                  
 294   4                   car_stop();
 295   4                      
 296   4                  if(candle_fire_3==0x00&&candle_fire_2==0x00)//èœ¡çƒ›2å’Œèœ¡çƒ›3ç­
 297   4                  {
 298   5                    turn_right_90();//-----------------å›å®¶
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 6   

 299   5                    do
 300   5                    {
 301   6                      Circulation_wall_left();  //å¯»å·¦å¢™   
 302   6                    }
 303   5                    while(front_dis > 200);//å‰æ–¹20cmå¤„
 304   5                    
 305   5                    
 306   5                    /********************************å³è½¬å›å®¶å®¶******************************/
 307   5                    turn_right_90();
 308   5                    goto only_fire_9_fire_1_is_on_back_home;//ç­èœ¡çƒ›1å’Œèœ¡çƒ›9åå›å®¶
 309   5                  }
 310   4                  
 311   4                  
 312   4                  
 313   4                  /******************å‡ºå»1#å*********************/
 314   4                  turn_left_90();
 315   4          /////////////////
 316   4          //
 317   4          //åœ¨1#æˆ¿é—´é—¨å£ï¼Œä¸”å¤„åœ¨2#è¡—é“ä¸Šï¼Œå¹¶ç¦»å¢™160æ¯«ç±³ã€‚å‡†å¤‡å·¡å³å¢™èµ°åˆ°2#å¤§è¡—å°½å¤´ï¼Œ
 318   4          ////////////////////              
 319   4                      ///////////////////////////////           
 320   4                      
 321   4                    // now potion is street and nearby is the gate of room1 walk alone right.and next action stop at th
             -e end of street   
 322   4                  do
 323   4                  {
 324   5                    Circulation_wall_right();     
 325   5                  }
 326   4                  while(front_dis > 180);
 327   4      
 328   4                    // now potion is end of street 2 ,next action is turn left 90   
 329   4                  car_stop();
 330   4                  
 331   4                  turn_left_90();//å·¦è½¬90Â°è¿›å»ä¸€å·æˆ¿é—´å’ŒäºŒå·æˆ¿é—´çš„ä¸­é—´è¿‡é“
 332   4                }
 333   3                  
 334   3                else if(candle_fire_3==0x01||candle_fire_2==0x01)//èœ¡çƒ›2èœ¡çƒ›3ç‡ƒçƒ§
 335   3                {
 336   4                  do
 337   4                  {
 338   5                    Circulation_wall_right(); //å¯»å³å¢™   
 339   5                  }
 340   4                    while(front_dis > 200);//è·ç¦»äºŒå·æˆ¿é—´å‰æ–¹17.7cmå¤„å·¦è½¬90Â°ï¼Œ200-5.20
 341   4                  // now potion is end of street 2 ,next action is turn left 90   
 342   4                  car_stop();
 343   4                  turn_left_90();
 344   4                }
 345   3                  /***********************æ²¡ææ‡‚5-18**********************/
 346   3                else
 347   3                {
 348   4                  turn_left_90();//è¿™é‡Œå›å®¶
 349   4                  goto only_fire1_is_on_back_home;
 350   4                }
 351   3            
 352   3      
 353   3      //
 354   3      //åœ¨2#è¡—é“çš„å°½ç«¯ï¼Œå‡†å¤‡å‰å¾€2#æˆ¿é—´ã€‚å…ˆå·¡å³å¢™èµ°ï¼Œå‘ç°å·¦å¢™ï¼Œç«‹åˆ»å·¡å·¦å¢™ï¼Œä¸€ç›´è
             -µ°åˆ°2#æˆ¿é—´å¤§é—¨ä¸­å¤®
 355   3      ////////////////////            
 356   3                // now potion is end of street2,next action iswalk alone right wall   
 357   3                //è¿™ä¸€æ®µç¨‹åºè¾ƒä¸ºéº»çƒ¦ã€‚é€ æˆéº»çƒ¦çš„åŸå› æ˜¯å¤„äºæ‹è§’æ—¶ï¼Œæµ‹å³å¢™æ•°æ®å¤„äºæ··æ²Œ
             -çŠ¶æ€ï¼Œåº”è¯¥ä¸º172æ¯«ç±³ï¼Œå¯æ˜¯å¤„äºç›´è§’è¾¹ç¼˜æ—¶
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 7   

 358   3                  //æ•°æ®å˜å¤§ï¼Œç”šè‡³èƒ½å˜æˆ220,250ï¼Œä¹ƒè‡³300å¤šï¼Œè€Œä¸”è¿™ä¸ªæ··æ²ŒåŒºåŸŸé•¿åº¦è¿˜ä¸å°ï¼Œæ
             -œ‰å¤§çº¦50æ¯«ç±³ã€‚
 359   3                  
 360   3      /////////////////
 361   3      //
 362   3      //å…ˆå·¡å³å¢™èµ°ï¼Œä¸€ç›´æœç´¢å·¦å¢™ï¼Œç›´åˆ°ç¨³å®šçš„å‘ç°å·¦å¢™ï¼Œ
 363   3      ////////////////////
 364   3                
 365   3                
 366   3                
 367   3                
 368   3                  left_300=0x00;
 369   3                  do
 370   3                  {
 371   4                    Circulation_wall_right();//å…ˆå¯»å³å¢™
 372   4                    left_dis= Ultrasonic_Get_Left();
 373   4                    
 374   4                    if(left_dis<300)
 375   4                    {
 376   5                      left_300++;
 377   5                    }
 378   4                    else
 379   4                    {
 380   5                      left_300=0x00;
 381   5                    }
 382   4                  }
 383   3                  while(left_dis>300||left_300<=3);//front_dis > 580||left_dis <600
 384   3                  //car_stop();
 385   3                  //car_stop();
 386   3                  
 387   3      /////////////           
 388   3      //è¿™æ—¶å°è½¦3#è¡—é“å·¦å¢™é¦–ç«¯ï¼Œä¸‹é¢å¼€å§‹å¯»æ‰¾å·¦å¢™èµ°ï¼Œå³è¾¹æœ‰ç¨³å®šçš„å¤§äº800çš„æ•°æ®ï¼Œ
             -è¿™å°±æ˜¯åˆ°äº†2å·æˆ¿é—´çš„é—¨è¾¹ç¼˜
 389   3      ///////////////
 390   3                
 391   3                  right_900=0;
 392   3                  do
 393   3                  {
 394   4                    Circulation_wall_right();
 395   4                    
 396   4                    if(right_dis>800)
 397   4                    {
 398   5                      right_900++;
 399   5                      if(right_900>=0x03)
 400   5                      {
 401   6                        car_stop();
 402   6                        break;
 403   6                      }
 404   5                    }
 405   4                    else
 406   4                    {
 407   5                      right_900=0x00;
 408   5                    }
 409   4                  }while(right_dis<800||right_dis<=3);
 410   3                  
 411   3                  
 412   3                  car_stop();
 413   3      /***************************************æ­¤å¤„æœ‰é—®é¢˜*****************************/
 414   3                  /************************æ— æ³•è¿›å…¥2#æˆ¿é—´***************************/
 415   3                  /**************************é—®é¢˜å·²è§£å†³*****************************/
 416   3                  //while(front_dis > 1400||right_dis <600);//front_dis > 580||left_dis <600
 417   3                // now potion is begin of door of room 2,next action is walk forward 20 cm  
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 8   

 418   3      //            car_stop();
 419   3                  
 420   3      /////////////           
 421   3      //è¿™æ—¶å°è½¦2å·æˆ¿é—´å¤§é—¨å£ï¼Œä½†ä¸æ˜¯å¤§é—¨ä¸­å¤®ï¼Œå‡†å¤‡å‰å¾€å¤§é—¨ä¸­å¤®
 422   3      ///////////////
 423   3      
 424   3                  i=0x00;
 425   3                  
 426   3                  do
 427   3                  {
 428   4                    Circulation_wall_right();//å¯»å³å¢™
 429   4                    
 430   4                    }while(i<=42);  //50æ”¹ä¸º44
 431   3                  
 432   3                // now potion is middle of door of room 2,next action isturn right 90 
 433   3                  car_stop();
 434   3                  turn_right_90();//å³è½¬90Â°
 435   3          
 436   3                // now potion is middle of door of room 2,next action isturn walk alone left 2  
 437   3      /////////////           
 438   3      //è¿™æ—¶å°è½¦2å·æˆ¿é—´å¤§é—¨å£ä¸­å¤®ï¼Œå‡†å¤‡è¿›å…¥2#æˆ¿é—´ï¼Œå¹¶åœ¨2å·æˆ¿é—´3#ç€ç«ç‚¹å¤„åœä¸‹æ¥ï¼
             -Œç¦»å¢™180æ¯«ç±³åœä¸‹æ¥
 439   3      ///////////////
 440   3                  
 441   3      /////////////     ///////////////////     
 442   3      //ä¿®æ”¹è·¯å¾„2019-10-2///////////////
 443   3      ////////////////////////////
 444   3                                
 445   3                  do  
 446   3                  {
 447   4                    Circulation_wall_left();//å¯»å·¦å¢™ä¿æŒ18cm
 448   4                  }while(front_dis >210);//180,210-5.20
 449   3      
 450   3                  car_stop(); 
 451   3                    
 452   3                  if(candle_fire_2==0x01)//èœ¡çƒ›2ç‡ƒçƒ§
 453   3                  {
 454   4                    turn_right_90();//å³è½¬90Â°
 455   4                    car_stop();
 456   4                    /*******************å››æ¬¡å¡å°”æ›¼æ»¤æ³¢æ˜¯å¹²ä»€ä¹ˆï¼Ÿ*********************/
 457   4                    /*********************æ­¤å¤„ä¹Ÿæœ‰é—®é¢˜ï¼******************/
 458   4                    /******************é—®é¢˜å·²è§£å†³æ”¹å˜è½¬å¼¯å»¶è¿Ÿ**********************/
 459   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 460   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 461   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 462   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 463   4                    do
 464   4                    {
 465   5                      Circulation_wall_left();
 466   5                      }while(front_dis >190);//å‰è·ç¦»20cmï¼Œ190-5.20
 467   4                  
 468   4                    car_stop();
 469   4                    turn_right_90();
 470   4                    car_stop();
 471   4      /////////////           
 472   4      //è¿™æ—¶å°è½¦å¤„äº2#æˆ¿é—´3#æ‹è§’ï¼Œå‡†å¤‡å·¡å·¦å¢™ï¼Œå¹¶åœ¨ç¦»å¢™180æ¯«ç±³å¤„åœä¸‹æ¥
 473   4      ///////////////
 474   4                    
 475   4                    do
 476   4                    {
 477   5                      Circulation_wall_left();
 478   5                    }while(front_dis >185);
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 9   

 479   4              
 480   4                    car_stop();
 481   4                    delay_ms(100);
 482   4                    
 483   4                    turn_left_90_big();
 484   4                    car_stop();//--------------2ç«-----------
 485   4                    
 486   4                    do
 487   4                    {
 488   5                      Fan_On;
 489   5                      delay_ms(1500);
 490   5                      break;
 491   5                    }
 492   4                    while(LeftFire==0||RightFire==0);
 493   4                    
 494   4                    //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 495   4                    do
 496   4                    {
 497   5                      Fan_On;
 498   5                      delay_ms(1500);
 499   5                      break;
 500   5                    }
 501   4                    while(LeftFire==0||RightFire==0);
 502   4                    
 503   4                  
 504   4                    Fan_Off;
 505   4                    //turn back 
 506   4        //            find_fire_turn_back_right();
 507   4        //            car_stop();
 508   4                    delay_ms(100);
 509   4                  
 510   4                    turn_left_90_big();
 511   4                    car_stop();
 512   4      
 513   4                  
 514   4                      //-----------------é˜²è¯¯åˆ¤-----2å›------ 
 515   4                    prevent_time=0;
 516   4                    do
 517   4                    {
 518   5                      Circulation_wall_right();
 519   5                      prevent_time++;
 520   5                    }
 521   4                    while(right_dis < 400&& prevent_time<5);
 522   4                    prevent_time=0;
 523   4                //----------------------------------  
 524   4                          
 525   4                
 526   4                    do
 527   4                    {
 528   5                      Circulation_wall_right();
 529   5                    }while(front_dis >190);//170,190-5.20
 530   4                  // now potion is cornre 3 of room 2,next action  turn left
 531   4                    car_stop();
 532   4                    turn_left_90();
 533   4                    car_stop();
 534   4                  
 535   4                    if(candle_fire_3==0x01)
 536   4                    {
 537   5                      do
 538   5                      {
 539   6                        Circulation_wall_right();
 540   6                      }while(front_dis >170);//ä¹‹å‰æ˜¯210,170-5.20
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 10  

 541   5                        car_stop();
 542   5                       do
 543   5                      {
 544   6                        Fan_On;//------------------3ç«---
 545   6                        delay_ms(2000);
 546   6                        break;
 547   6                      }
 548   5                      while(LeftFire==0||RightFire==0);
 549   5                      
 550   5                      //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 551   5                      do
 552   5                      {
 553   6                        Fan_On;
 554   6                        delay_ms(1000);
 555   6                        break;
 556   6                      }
 557   5                      while(LeftFire==0||RightFire==0);
 558   5                      delay_ms(1);
 559   5                      
 560   5                      //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
 561   5                      while(LeftFire==0||RightFire==0)
 562   5                      {
 563   6                        Fan_On;
 564   6                        delay_ms(1000);
 565   6                        delay_ms(1000);
 566   6                        break;
 567   6                      }
 568   5                    
 569   5                      Fan_Off;
 570   5                      //////åŠ çš„
 571   5                      delay_ms(150);
 572   5                      //turn back 
 573   5        //              find_fire_turn_back_right();
 574   5                      turn_left_90();
 575   5                      car_stop();
 576   5                      goto only_fire_1_fire_9_fire_3_is_on_back_home;
 577   5                    }
 578   4                    
 579   4                    else //---------------æ— 3--
 580   4                    {
 581   5                      do
 582   5                      {
 583   6                        Circulation_wall_right();
 584   6                      }while(front_dis >180);
 585   5                      car_stop();
 586   5                      
 587   5                      turn_left_90();
 588   5                      
 589   5                      goto only_fire_1_fire_9_fire_3_is_on_back_home;
 590   5                    }
 591   4                }
 592   3      
 593   3               else //------------------æ— 2---
 594   3               {
 595   4                  do
 596   4                  {
 597   5                    Circulation_wall_left();
 598   5                  }while(front_dis >170);
 599   4      
 600   4                  car_stop();
 601   4                  turn_left_90();
 602   4                  do
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 11  

 603   4                  {
 604   5                    Fan_On;//---------------ç­3ç«
 605   5                    delay_ms(1500);
 606   5                    break;
 607   5                  }
 608   4                  while(LeftFire==0||RightFire==0);
 609   4                  
 610   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 611   4                  do
 612   4                  {
 613   5                    Fan_On;
 614   5                    delay_ms(1);
 615   5                    break;
 616   5                  }
 617   4                  while(LeftFire==0||RightFire==0);
 618   4                  delay_ms(1);
 619   4                  
 620   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
 621   4                  while(LeftFire==0||RightFire==0)
 622   4                  {
 623   5                    Fan_On;
 624   5                    delay_ms(1000);
 625   5                    delay_ms(1000);
 626   5                    break;
 627   5                  }
 628   4                  
 629   4                  Fan_Off;
 630   4                  //////åŠ çš„
 631   4                  delay_ms(100);
 632   4                  //turn back 
 633   4      //              find_fire_turn_back_right();
 634   4      //              car_stop();
 635   4                }
 636   3                turn_left_90();
 637   3                car_stop();
 638   3                  
 639   3                goto only_fire_1_fire_9_fire_3_is_on_back_home;
 640   3      
 641   3                  
 642   3                  
 643   3                  
 644   3      //---------------------å‡†å¤‡å›å¤´-------------------            
 645   3                  
 646   3        
 647   3      
 648   3      
 649   3      
 650   3                  
 651   3      
 652   3      /////////////////
 653   3      //
 654   3      //åœ¨ç€ç«ç‚¹3ä½ç½®ï¼Œå‡†å¤‡é©¶å‡º2#æˆ¿é—´ï¼Œå¹¶åœ¨3#è¡—é“åœä¸‹æ¥ï¼Œç¦»å¢™180æ¯«ç±³åœã€‚
 655   3      ////////////////////            
 656   3                // now potion is cornre 3 of  room 2,next action  walk alone righr wall
 657   3      only_fire_1_fire_9_fire_3_is_on_back_home:            
 658   3                  //-----------------é˜²è¯¯åˆ¤-----------
 659   3      //                prevent_time=0;           
 660   3      //                do
 661   3      //                {
 662   3      //                  Circulation_wall_right();
 663   3      //                  prevent_time++;
 664   3      //                }
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 12  

 665   3      //                while(right_dis < 200&&prevent_time<5);//é©¶å‡ºæˆ¿é—´2èµ°å‘3å·è¡—åŒºå³ä¾§è·ç¦»39cmâ€”â€”è¯¥ä
             -¸º20cm-5.18
 666   3      //                prevent_time=0;
 667   3      //              //----------------------------------  
 668   3                  
 669   3                  
 670   3                  do
 671   3                  {
 672   4                    Circulation_wall_right();
 673   4                  }while(front_dis >410);
 674   3                // now potion is cornre 4 of room 2,next action  turn left
 675   3                  car_stop();
 676   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 677   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 678   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 679   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 680   3                  do
 681   3                  {
 682   4                                    
 683   4      //             forward();
 684   4                    Circulation_wall_right();
 685   4                   
 686   4                  }while(front_dis >180);
 687   3                  car_stop();
 688   3                  turn_left_90();
 689   3                  car_stop();
 690   3                // now potion is  door of room 2,and meanwhile at the street 3,next action   walk alone righr wall
 691   3      /////////////           
 692   3      //è¿™æ—¶å°è½¦å¤„äº3#å¤§è¡—ï¼Œå·¡å³å¢™èµ°ï¼Œå¹¶æ‰«æå·¦å¢™ï¼Œç¨³å®šå‘ç°å·¦å¢™
 693   3      ///////////////
 694   3      
 695   3                  left_300=0x00;
 696   3                  do
 697   3                  {
 698   4                    Circulation_wall_right();
 699   4                    left_dis= Ultrasonic_Get_Left();
 700   4                    
 701   4                    if(left_dis<300)
 702   4                    {
 703   5                      left_300++;
 704   5                    }
 705   4                    else
 706   4                    {
 707   5                      left_300=0x00;
 708   5                    }
 709   4                  }
 710   3                  while(left_dis>300||left_300<=3);//front_dis > 580||left_dis <600
 711   3      //            car_stop();
 712   3      //            car_stop();
 713   3                  
 714   3                  
 715   3                  
 716   3      /////////////           
 717   3      //è¿™æ—¶å°è½¦å¤„äº3#å¤§è¡—ï¼Œå‘ç°å·¦å¢™ï¼Œå‡†å¤‡å·¡å·¦å¢™èµ°ï¼Œå¹¶åœ¨å‰å¢™170æ¯«ç±³å¤„åœä¸‹
 718   3      ///////////////           
 719   3        
 720   3                  do
 721   3                    
 722   3                  {
 723   4                    Circulation_wall_left();
 724   4                  }while(front_dis >180);
 725   3                  car_stop();
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 13  

 726   3                  turn_right_90();
 727   3      /////////////           
 728   3      //è¿™æ—¶å°è½¦å¤„äº2#å¤§è¡—å°½å¤´ï¼Œå‡†å¤‡å·¡å·¦å¢™èµ°ï¼Œå¹¶åœ¨å‰å¢™170æ¯«ç±³å¤„åœä¸‹
 729   3      ///////////////             
 730   3                  do
 731   3                    
 732   3                  {
 733   4                    Circulation_wall_left();
 734   4                  }while(front_dis >210);//åŸæ•°æ®180
 735   3                  car_stop();
 736   3                  turn_right_back_90(); 
*** WARNING C206 IN LINE 736 OF main.c: 'turn_right_back_90': missing function-prototype
 737   3                  
 738   3      /////////////           
 739   3      //è¿™æ—¶å°è½¦å¤„äº1#ç€ç«ç‚¹ï¼Œå‡†å¤‡å·¡å·¦å¢™èµ°ï¼Œå¹¶åœ¨å‰å¢™580æ¯«ç±³å¤„åœä¸‹ï¼Œå¹¶æ‰å¤´ï¼Œä¸ºä¸‹
             -æ¬¡å¯åŠ¨åšå‡†å¤‡
 740   3      /////////////// 
 741   3      only_fire_9_fire_1_is_on_back_home:           
 742   3                  car_stop();
 743   3                  
 744   3      only_fire1_is_on_back_home: 
 745   3                  
 746   3      //            i=0;
 747   3      //            do
 748   3      //            {
 749   3      //              Circulation_wall_left();
 750   3      //            }while(i<=30);
 751   3                  
 752   3                  
 753   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 754   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 755   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 756   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 757   3                  
 758   3                  do
 759   3                  {
 760   4                    Circulation_wall_left();
 761   4                  }while(front_dis >580);
 762   3                  //car_stop();
 763   3                  //car_stop(); 
 764   3      
 765   3                  do
 766   3                    
 767   3                  {
 768   4                    Circulation_wall_left();
 769   4                  }while(front_dis >500);
 770   3      //            car_stop();               
 771   3      
 772   3                  do
 773   3                    
 774   3                  {
 775   4                    Circulation_wall_left();
 776   4                  }while(front_dis >430);//-------------10.15
 777   3                  do
 778   3                    
 779   3                  {
 780   4                    Circulation_wall_left();
 781   4                  }while(front_dis >430);//-------------10.15
 782   3                  do
 783   3                    
 784   3                  {
 785   4                    Circulation_wall_left();
C51 COMPILER V9.60.0.0   MAIN                                                              10/02/2023 19:45:41 PAGE 14  

 786   4                  }while(front_dis >430);//-------------10.15
 787   3                  do
 788   3                    
 789   3                  {
 790   4                    Circulation_wall_left();
 791   4                  }while(front_dis >430);//-------------10.15
 792   3                  car_stop();
 793   3                  car_stop(); 
 794   3                  delay_ms(100);
 795   3                  car_stop();
 796   3                  while(1);
 797   3                  
 798   3          }
 799   2        }
 800   1      }
 801                
*** WARNING C294 IN LINE 86 OF main.c: unreachable code
*** WARNING C294 IN LINE 95 OF main.c: unreachable code
*** WARNING C294 IN LINE 213 OF main.c: unreachable code
*** WARNING C294 IN LINE 222 OF main.c: unreachable code
*** WARNING C294 IN LINE 492 OF main.c: unreachable code
*** WARNING C294 IN LINE 501 OF main.c: unreachable code
*** WARNING C294 IN LINE 548 OF main.c: unreachable code
*** WARNING C294 IN LINE 557 OF main.c: unreachable code
*** WARNING C294 IN LINE 608 OF main.c: unreachable code
*** WARNING C294 IN LINE 617 OF main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1494    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  11 WARNING(S),  0 ERROR(S)
