C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Applications\Keil_5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "ultrasonic.h"
   2          #include "action.h"
   3          #include "motor.h"
   4          #include "key.h"
   5          
   6          
   7          /**********************ÂÆö‰πâÊüê‰∫õÁÆ°ËÑö********************/
   8          bit candle_fire_1=0x01;//  1 is fire on ; 0 is extinguish
   9          bit candle_fire_9=0x01;//  1 is fire on ; 0 is extinguish
  10          bit candle_fire_3=0x00;////  1 is fire on ; 0 is extinguish
  11          bit candle_fire_2=0x00;////  1 is fire on ; 0 is extinguish
  12          
  13          
  14          sbit Fan = P0^0;
  15          sbit LeftFire = P0^2;
  16          sbit RightFire = P0^3;
  17          
  18          #define Fan_On {Fan = 0;tingche();tingche();tingche();tingche();tingche();}
  19          #define Fan_Off {Fan = 1;}
  20          
  21          
  22          
  23          unsigned char prevent_time = 0;
  24          unsigned int left_300 = 0;
  25          unsigned int right_900 = 0;
  26          unsigned int pwm_num = 0;
  27          unsigned int room_2_pwm_num = 0;
  28          unsigned int left_time=0;
  29          
  30          
  31          /******************‰∏ªÂáΩÊï∞***************
  32          **************ÂÆûÁé∞ÂäüËÉΩÁßªÂä®ÁÅ≠ÁÅ´**********/
  33          void main()
  34          {
  35   1              LED = 1;//‰∫ÆÁÅØÊåáÁ§∫
  36   1              Timer0Init();//Â∑¶ËΩÆPWM
  37   1              Timer1Init();//Âè≥ËΩÆPWM
  38   1              Ultrasonic_Init();
  39   1      
  40   1              while(1)
  41   1              { 
  42   2                      keyscan();//ÊåâÈîÆÊ£ÄÊµã
  43   2                      if(start==1)
  44   2                      {
  45   3                              /**********************ÊµãËØïÊóãËΩ¨ËßíÂ∫¶********************/
  46   3                              
  47   3                              
  48   3                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  49   3                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  50   3                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  51   3                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  52   3                              right_dis= Ultrasonic_Get_Right();//ÂæóÂà∞‰∏ÄÊ¨°Âè≥Ë∂ÖÂ£∞Ê≥¢ÊµãË∑ùÊ®°ÂùóÁöÑË∑ùÁ¶ª
  53   3                              left_dis= Ultrasonic_Get_Left();//ÂæóÂà∞‰∏ÄÊ¨°Â∑¶Ë∂ÖÂ£∞Ê≥¢ÊµãË∑ùÊ®°ÂùóÁöÑË∑ùÁ¶ª
  54   3                              right_dis= Ultrasonic_Get_Right();
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 2   

  55   3                              left_dis= Ultrasonic_Get_Left();
  56   3                              right_dis= Ultrasonic_Get_Right();
  57   3                              left_dis= Ultrasonic_Get_Left();
  58   3                              
  59   3                              
  60   3                              goto aaa;//Ë∑≥ËΩ¨aaa
  61   3                      //////////////////
  62   3      aaa:
  63   3                              if(candle_fire_1==0x01)
  64   3                              {
  65   4                                      do                                                                 
  66   4                                      {       
  67   5                                              Circulation_wall_right();                                                               
  68   5                                      }
  69   4                                      while(front_dis > 189 );/////   23.05.25   182cm   Â§™ËøëËøòÈúÄË∞ÉÊï¥   185cm ËøòÊòØÊúâÁÇπËøë 23.10.5 
             -Âéü189
  70   4                                      //now position is fire 1,and next step find fire 1                      
  71   4                                      car_stop();     
  72   4                                      
  73   4                                                              
  74   4                                      ////find_fire_turn_right();
  75   4                                      //now position is fire 1,and next step put off  fire 1          
  76   4                                      car_stop();
  77   4                              
  78   4                                      do
  79   4                                      {
  80   5                                              Fan_On;     //-----------------ÁÅ≠1---------------------
  81   5                                              delay_ms2(1500);
  82   5                                              break;
  83   5                                      }
  84   4                                      while(LeftFire==0||RightFire==0);
  85   4                                      
  86   4                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú2ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå
  87   4                                      do
  88   4                                      {
  89   5                                              Fan_On;
  90   5                                              delay_ms2(500);  //ÂéüÊú¨ÊòØ1500ÁöÑ   23 .05.26 Êîπ‰∏∫500Â∞ùËØï‰∏Ä‰∏ã
  91   5                                              break;
  92   5                                      }
  93   4                                      while(LeftFire==0||RightFire==0);
  94   4                                                              
  95   4                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú0.5ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå‰øùËØÅÂêπÁÅ≠
  96   4                                      
  97   4                                      Fan_Off;
  98   4                                      //////Âä†ÁöÑ
  99   4                                      delay_ms(150);
 100   4                                              //now position is fire 1,and next turn back                             
 101   4                                                              
 102   4      //                                                      find_fire_turn_back_left();
 103   4                                                              
 104   4                                              //now position is fire 1,and next turn left                             
 105   4                                      car_stop();
 106   4                                      
 107   4                                      if(candle_fire_9==0x00&&candle_fire_3==0x00&&candle_fire_2==0x00)
 108   4                                      {
 109   5                                              turn_right_180();
 110   5                                              goto only_fire1_is_on_back_home;//ÁÅ≠1ËøîËà™
 111   5                                      }
 112   4                                      turn_left_90();//
 113   4                                      car_stop();
 114   4                                      
 115   4                              }
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 3   

 116   3                              else//----------------------1Êó†ÁÅ´-----------------------
 117   3                              {
 118   4                                      do                                                                 //‰∏ÄÂè∑ÊàøÈó¥
 119   4                                      {
 120   5                                              Circulation_wall_right();       
 121   5                                              //walkalone_left_1();                                                           
 122   5                                      }
 123   4                                      while(front_dis > 182);//ÁÅ≠‰∏ÄÂè∑ÁÅ´ÁöÑË∑ùÁ¶ª
 124   4              //now position is fire 1,and next step find fire 1                      
 125   4                                      car_stop();
 126   4                                      turn_left_90();//
 127   4                              }
 128   3                              /////////////////
 129   3      //
 130   3      //‰ªé1#ÁùÄÁÅ´ÁÇπÂá∫ÂèëÔºåÂáÜÂ§áÂØªÊâæ1#ÊàøÈó¥ÁöÑÂ§ßÈó®‰∏≠Â§ÆÔºå‰ºÅÂõæËøõÂÖ•1Âè∑ÊàøÈó¥Â§ßÈó®„ÄÇ
 131   3      //‰∏∫‰∫ÜÈò≤Ê≠¢ËØØÂà§ÔºåÊ£ÄÊµãÂ§ßÈó®ÔºåÊ£ÄÊµã‰∏§Ê¨°ÔºåÂéüÂõ†ÊòØÂèà‰∏ÄÊ¨°ÂèëÁé∞Êµã‰∏çÂáÜËøòÂú®1#ÁùÄÁÅ´ÁÇπÔºå
             -Âç¥ËØØËÆ§‰∏∫Ëá™Â∑±Âú®1#Âè∑ÊàøÈó¥Èó®Âè£
 132   3      ////////////////////
 133   3                                      //now position is fire 1,and next walk alone withe the right wall       
 134   3                                       front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//Âç°Â∞îÊõºÊª§Ê≥¢
 135   3                                       left_dis= Ultrasonic_Get_Left();
 136   3                                       right_dis= Ultrasonic_Get_Right();
 137   3                                       if(candle_fire_9==0x01)
 138   3                                       {
 139   4                                                i=0;
 140   4                                                      do                                                                 //‰∏ÄÂè∑ÊàøÈó¥
 141   4                                                      {
 142   5                                                              Circulation_wall_right();
 143   5                                                      }
 144   4                                                      while(i<=35);
 145   4                                                      //‰∏∫‰∫ÜÈò≤Ê≠¢ËØØÂà§ÔºåÂèëÁé∞‰∏ÄÂè∑ÊàøÈó¥Èó®Âè£ ÊâßË°å‰∏§Ê¨°„ÄÇÂõ†‰∏∫Ë∞ÉËØïËøáÁ®ã‰∏≠Âú®ÁÅ´ÁÑ∞1Â§ÑÂ∫î
             -‰∏∫ÂâçÊñπË∂ÖÂ£∞ÊµãË∑ùÈîôËØØÔºåÊµãÊàê514ÊØ´Á±≥ÔºåÂÆûÈôÖÂ∫î‰∏∫1200ÊØ´Á±≥
 146   4                                                      //ÔºåÂØºËá¥Êª°Ë∂≥while(front_dis > 550||left_dis <600)Êù°‰ª∂ÔºåÊòØÁöÑÂçïÁâáÊú∫Êú¨Âú®ÁÅ´ÁÑ∞1ËØØËÆ§‰∏∫
             -Âú®‰∏ÄÂè∑ÊàøÈó¥Èó®Âè£ÔºåÊâÄ‰ª•ÂÜô‰∏§Ê¨°
 147   4                                                      //Â∏åÊúõÂâçÊñπË∂ÖÂ£∞ÊµãË∑ù‰∏çË¶ÅÁåúÊµãÈîô‰∫Ü„ÄÇ
 148   4                                                                      
 149   4                                                      delay_ms(100);
 150   4                                                              
 151   4                                                      left_dis= Ultrasonic_Get_Left();//Â∑¶‰æßÊ£ÄÊü•
 152   4                                          right_dis= Ultrasonic_Get_Right();//Âè≥‰æßÊ£ÄÊü•
 153   4                                                      
 154   4                                                      do                                                                 //ËøõÂÖ•‰∏ÄÂè∑ÊàøÈó¥Ââç‚Äî‚ÄîÂØªÊâæÂè≥Â¢ô
 155   4                                                      {
 156   5                                                              Circulation_wall_right();
 157   5                                                              left_dis= Ultrasonic_Get_Left();
 158   5                                                      }
 159   4                                                      while(front_dis > 580||left_dis <600);  //front_dis=660
 160   4                                                      
 161   4                                                      car_stop();
 162   4                                                //now position is middle gate of room 1,and next action turn left 
 163   4                                                      delay_ms(50);
 164   4      
 165   4                                                      //                                      
 166   4                                                      /////////////////
 167   4                                                      //
 168   4                                                      //Âú®1#ÊàøÈó¥Â§ßÈó®‰∏≠Â§Æ„ÄÇÂáÜÂ§áËøõÂÖ•Â§ßÈó®ÔºåÂπ∂Â∑°Âè≥Â¢ô Âú®Á¶ªÂ¢ô177ÊØ´Á±≥Â§ÑÂÅú‰∏ãÊù•
 169   4                                                      ////////////////////                                            
 170   4                                                                      
 171   4                                                      turn_left_90();                            //ËøõÂÖ•ÊàøÈó¥1
 172   4                                                                      
 173   4                                                      //now position is middle gate of room 1,and next action pass through gate and walk alone with right 
             -wall         ///////////////  
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 4   

 174   4                                                      do
 175   4                                                      {
 176   5                                                              Circulation_wall_right();                       
 177   5                                                      }
 178   4                                                      while(front_dis > 215);//Êîπ‰∏∫20-5.19Ôºå23-5.20   230  250    230  210ÂêàÈÄÇ
 179   4                                                      delay_ms(50);//-------------------
 180   4                                              //now position is corner 1 of room 1,and next action turn left
 181   4                                                      car_stop();
 182   4                                                      turn_left_90();                                                 //Â∑¶ËΩ¨
 183   4                      //                                      
 184   4                      /////////////////
 185   4                      //
 186   4                      //Âú®1#ÊàøÈó¥1Âè∑ÊãêËßíÔºåÂáÜÂ§áÂâçÂæÄ9#ÁùÄÁÅ´ÁÇπ„ÄÇÂπ∂ÁÅ≠ÁÅ´
 187   4                      ////////////////////                                            
 188   4                                                                      
 189   4                                                      //now position is corner 1 of room 1,and next action wanlk alone with right wall
 190   4                                                      do
 191   4                                                      {
 192   5                                                                              Circulation_wall_right();       //ÂØªÂè≥Â¢ô             
 193   5                                                      }
 194   4                                                      while(front_dis > 220);//ÂéüÊï∞ÊçÆ185Êîπ160-5.18Ôºå19-5.20,21-5.25     210   215
 195   4                                                      //now position is corner 2 of room 1,and next action find fire 2        
 196   4                                                      car_stop();
 197   4                                                      
 198   4                                                      //////begin find fire/////////////////////////
 199   4                                                      //
 200   4                                                      //car_stop();
 201   4      //                                                              find_fire_turn_right();
 202   4                                                      
 203   4                                      //now position is corner 2 of room 1,and next action put off fire 2                     
 204   4                                                                      
 205   4                                                      do
 206   4                                                      {
 207   5                                                              Fan_On;     //-----------------ÁÅ≠9ÁÅ´---------
 208   5                                                              delay_ms2(1000);//Âéü1500
 209   5                                                              break;
 210   5                                                      }
 211   4                                                      while(LeftFire==0||RightFire==0);
 212   4                                                      
 213   4                                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú2ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå
 214   4                                                      do
 215   4                                                      {
 216   5                                                              Fan_On;
 217   5                                                              delay_ms2(600);         //  23.05.26  Êîπ‰∏∫ 500ms  ÂéüÊú¨1500
 218   5                                                              break;
 219   5                                                      }
 220   4                                                      while(LeftFire==0||RightFire==0);
 221   4                                                      
 222   4                                                                      
 223   4                                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú0.5ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå‰øùËØÅÂêπÁÅ≠
 224   4                                                      while(LeftFire==0||RightFire==0)
 225   4                                                      {
 226   5                                                              Fan_On;
 227   5                                                              delay_ms2(600);
 228   5                                                              break;
 229   5                                                      }
 230   4                                                                      
 231   4                                                      Fan_Off;
 232   4                                                      //////Âä†ÁöÑ
 233   4                                                delay_ms(100);
 234   4                                                      //now position is corner 2 of room 1,and next action turn back  
 235   4      //                                                              find_fire_turn_back_left();
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 5   

 236   4                                                                      
 237   4                                                                      
 238   4                                                      //now position is corner 2 of room 1,and next action turn 180 degree    
 239   4                                                      car_stop();
 240   4                                                      turn_right_180();//Âè≥ËΩ¨Êúâ180¬∞‰∏çË∂≥‚Äî‚ÄîÂ∑≤Ëß£ÂÜ≥
 241   4                                                      
 242   4                                                      
 243   4                                                      /******************************ÊúâËØØÁöÑÂú∞Êñπ*******************************/
 244   4                                                      /*******************************Â∑≤ÁªèËß£ÂÜ≥********************************/
 245   4                      /////////////////
 246   4                      //
 247   4                      //Âú®9#ÁùÄÁÅ´ÁÇπÔºåÂáÜÂ§áÁ¶ªÂºÄÁùÄÁÅ´ÁÇπÔºåÂ∑°Â∑¶Â¢ô„ÄÇÂú®Á¶ªÂ¢ô160ÊØ´Á±≥Â§ÑÂÅú‰∏ãÊù•
 248   4                      ////////////////////                                                    
 249   4                                                                      ///////////////////////////////
 250   4                                                      //now position is corner 2 of room 1,and next action walk alone with left wall  
 251   4                                                              //-----------------Èò≤ËØØÂà§----------- 
 252   4                                                      i=0;
 253   4                                                      do
 254   4                                                      {
 255   5                                                              Circulation_wall_left();        //ÂØªÂ∑¶Â¢ô
 256   5                                                      }
 257   4                                                      while(left_dis < 390 && i < 24);//iÂéüÊï∞ÊçÆ‰∏∫12Êîπ‰∏∫-24Ôºå5-18
 258   4                                                      
 259   4                                                      
 260   4                                              //----------------------------------    
 261   4                                                      
 262   4                                                      do
 263   4                                                      {
 264   5                                      //                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//Âç°Â∞îÊõºÊª§Ê≥¢     3.28Âà†Èô§
 265   5                                                              Circulation_wall_left();        //ÂØªÂ∑¶Â¢ô             
 266   5                                                      }
 267   4                                                      while(front_dis > 190);//18cmÔºå230-5.20    3.23-260    180ÂêàÈÄÇ   175Á®çÂæÆÊúâÁÇπÁ¥ß    
 268   4                                              // turn right at the cornner 1  
 269   4                                                      car_stop();
 270   4                                                      turn_right_90();
 271   4                                                      
 272   4                      //////////////////
 273   4                              
 274   4      //ÂºÄÊú∫Âá∫ÂèëÔºåÂ∑°Âè≥Â¢ôÔºåÂú®Á¶ªÂ¢ô180ÊØ´Á±≥Â§ÑÂÅú‰∏ã
 275   4      //Âπ∂Âú®3#Ë°óÈÅìÂÅú‰∏ãÊù•ÔºåÁ¶ªÂ¢ô180ÊØ´Á±≥ÂÅú„ÄÇ
 276   4      // now potion is cornre 3 of  room 2,next action  walk alone right wall
 277   4                      ///////////////////
 278   4                                                      /////////////////
 279   4                      //
 280   4                      //Âú®1#ÊàøÈó¥ÔºåÊãêËßí1ÔºåÂáÜÂ§áÁ¶ªÂºÄ‰∏ÄÂè∑ÊàøÈó¥ÔºåÂ∑°Â∑¶Â¢ôËµ∞ÔºåÂú®Á¶ªÂ¢ô160ÊØ´Á±≥Â§ÑÂÅú‰∏ãÊù•
 281   4                      ////////////////////    19Âπ¥Êîπ190                                             
 282   4      
 283   4                                                                      
 284   4                                                              /// now postion is room 1 corner 1 and walk alone left wall  and next action stop at the street 
 285   4                                                      do
 286   4                                                      {
 287   5                              //                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//Âç°Â∞îÊõºÊª§Ê≥¢   3.28Âà†Èô§
 288   5                                                              Circulation_wall_left();//ÂØªÂ∑¶Â¢ô                     
 289   5                                                      }
 290   4                                                      while(front_dis > 230);//È©∂Âá∫Âà∞1Âè∑ÊàøÈó¥Âá∫Âè£1#Ë°óÂå∫Â§ÑÂâçÂ¢ô19cm   23cmÂêàÈÄÇ
 291   4                                                      
 292   4                                              // now potion is street and nearby is the gate of room1 ,turn left 90 degree.   
 293   4                                                      
 294   4                                                       car_stop();
 295   4                                                                      
 296   4                                                      if(candle_fire_3==0x00&&candle_fire_2==0x00)//Ëú°ÁÉõ2ÂíåËú°ÁÉõ3ÁÅ≠
 297   4                                                      {
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 6   

 298   5                                                              turn_right_90();//-----------------ÂõûÂÆ∂
 299   5                                                              do
 300   5                                                              {
 301   6                                                                      Circulation_wall_left();        //ÂØªÂ∑¶Â¢ô             
 302   6                                                              }
 303   5                                                              while(front_dis > 200);//ÂâçÊñπ20cmÂ§Ñ
 304   5                                                              
 305   5                                                              
 306   5                                                              /********************************Âè≥ËΩ¨ÂõûÂÆ∂ÂÆ∂******************************/
 307   5                                                              turn_right_90();
 308   5                                                              goto only_fire_9_fire_1_is_on_back_home;//ÁÅ≠Ëú°ÁÉõ1ÂíåËú°ÁÉõ9ÂêéÂõûÂÆ∂
 309   5                                                      }
 310   4                                                      
 311   4                                                      
 312   4                                                      
 313   4                                                      /******************Âá∫Âéª1#Âêé*********************/
 314   4                                                      turn_left_90();
 315   4                      /////////////////
 316   4                      //
 317   4                      //Âú®1#ÊàøÈó¥Èó®Âè£Ôºå‰∏îÂ§ÑÂú®2#Ë°óÈÅì‰∏äÔºåÂπ∂Á¶ªÂ¢ô160ÊØ´Á±≥„ÄÇÂáÜÂ§áÂ∑°Âè≥Â¢ôËµ∞Âà∞2#Â§ßË°óÂ∞ΩÂ§¥Ôºå
 318   4                      ////////////////////                                                    
 319   4                                                                      ///////////////////////////////                                         
 320   4                                                                      
 321   4                                                              // now potion is street and nearby is the gate of room1 walk alone right.and next action stop at th
             -e end of street               
 322   4                                                      do
 323   4                                                      {
 324   5                                                              Circulation_wall_right();                       
 325   5                                                      }
 326   4                                                      while(front_dis > 200);//180   
 327   4      
 328   4                                                              // now potion is end of street 2 ,next action is turn left 90           
 329   4                                                      car_stop();
 330   4                                                      
 331   4                                                      turn_left_90();//Â∑¶ËΩ¨90¬∞ËøõÂéª‰∏ÄÂè∑ÊàøÈó¥Âíå‰∫åÂè∑ÊàøÈó¥ÁöÑ‰∏≠Èó¥ËøáÈÅì
 332   4                                              }
 333   3                                                      
 334   3                                              else if(candle_fire_3==0x01||candle_fire_2==0x01)//Ëú°ÁÉõ2Ëú°ÁÉõ3ÁáÉÁÉß
 335   3                                              {
 336   4                                                      do
 337   4                                                      {
 338   5                                                              Circulation_wall_right();       //ÂØªÂè≥Â¢ô             
 339   5                                                      }
 340   4                                                              while(front_dis > 200);//Ë∑ùÁ¶ª‰∫åÂè∑ÊàøÈó¥ÂâçÊñπ17.7cmÂ§ÑÂ∑¶ËΩ¨90¬∞Ôºå200-5.20
 341   4                                                      // now potion is end of street 2 ,next action is turn left 90           
 342   4                                                      car_stop();
 343   4                                                      turn_left_90();
 344   4                                              }
 345   3                                                      /***********************Ê≤°ÊêûÊáÇ5-18**********************/
 346   3                                              else
 347   3                                              {
 348   4                                                      turn_left_90();//ËøôÈáåÂõûÂÆ∂
 349   4                                                      goto only_fire1_is_on_back_home;
 350   4                                              }
 351   3                              
 352   3      
 353   3      //
 354   3      //Âú®2#Ë°óÈÅìÁöÑÂ∞ΩÁ´ØÔºåÂáÜÂ§áÂâçÂæÄ2#ÊàøÈó¥„ÄÇÂÖàÂ∑°Âè≥Â¢ôËµ∞ÔºåÂèëÁé∞Â∑¶Â¢ôÔºåÁ´ãÂàªÂ∑°Â∑¶Â¢ôÔºå‰∏ÄÁõ¥Ë
             -µ∞Âà∞2#ÊàøÈó¥Â§ßÈó®‰∏≠Â§Æ
 355   3      ////////////////////                                            
 356   3                                      
 357   3                                              
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 7   

 358   3                                              
 359   3                                                      right_dis=kalmanfilter(Ultrasonic_Get_Right(),3);
 360   3                                                      right_dis=kalmanfilter(Ultrasonic_Get_Right(),3);
 361   3                                                      right_dis=kalmanfilter(Ultrasonic_Get_Right(),3);
 362   3                                                      do{Circulation_wall_right();Circulation_wall_right();}while(right_dis<300);
 363   3                                                      do{Circulation_wall_right();Circulation_wall_right();}while(right_dis<300);
 364   3                                                      do{Circulation_wall_right();Circulation_wall_right();}while(right_dis<300);
 365   3                                                      i=0;
 366   3                                                      do{forward();}while(i<40);
 367   3                                                      car_stop();
 368   3                                                      car_stop();
 369   3                                              
 370   3      
 371   3                                                      turn_right_90_small();//Âè≥ËΩ¨90¬∞
 372   3                                                      car_stop();
 373   3                      
 374   3                                      
 375   3      /////////////                                           
 376   3      //ËøôÊó∂Â∞èËΩ¶2Âè∑ÊàøÈó¥Â§ßÈó®Âè£‰∏≠Â§ÆÔºåÂáÜÂ§áËøõÂÖ•2#ÊàøÈó¥ÔºåÂπ∂Âú®2Âè∑ÊàøÈó¥3#ÁùÄÁÅ´ÁÇπÂ§ÑÂÅú‰∏ãÊù•Ôº
             -åÁ¶ªÂ¢ô180ÊØ´Á±≥ÂÅú‰∏ãÊù•
 377   3      ///////////////
 378   3                                                      
 379   3      
 380   3                                                      do      
 381   3                                                      {
 382   4                                                              Circulation_wall_left();//ÂØªÂ∑¶Â¢ô‰øùÊåÅ18cm
 383   4                                                      }while(front_dis >230);//180,210-5.20
 384   3      
 385   3                                                      car_stop();     
 386   3                                                              
 387   3                                                      if(candle_fire_2==0x01)//Ëú°ÁÉõ2ÁáÉÁÉß
 388   3                                                      {
 389   4                                                              turn_right_90();//Âè≥ËΩ¨90¬∞
 390   4                                                              car_stop();
 391   4                                                              /*******************ÂõõÊ¨°Âç°Â∞îÊõºÊª§Ê≥¢ÊòØÂπ≤‰ªÄ‰πàÔºü*********************/
 392   4                                                              /*********************Ê≠§Â§Ñ‰πüÊúâÈóÆÈ¢òÔºÅ******************/
 393   4                                                              /******************ÈóÆÈ¢òÂ∑≤Ëß£ÂÜ≥ÊîπÂèòËΩ¨ÂºØÂª∂Ëøü**********************/
 394   4                                                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 395   4                                                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 396   4                                                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 397   4                                                              front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 398   4                                                              do
 399   4                                                              {
 400   5                                                                      Circulation_wall_left();
 401   5                                                              }while(front_dis >195);//ÂâçË∑ùÁ¶ª20cmÔºå190-5.20     190ÂèØ‰ª•‰ΩøÁî® Á®çÂæÆËøë‰∏Ä‰∫õ  
 402   4                                                      do
 403   4                                                              {
 404   5                                                                      Circulation_wall_left();
 405   5                                                              }while(front_dis >195);//ÂâçË∑ùÁ¶ª20cmÔºå190-5.20     190ÂèØ‰ª•‰ΩøÁî® Á®çÂæÆËøë‰∏Ä‰∫õ 
 406   4                                                              car_stop();
 407   4                                                              turn_right_90();
 408   4                                                              car_stop();
 409   4      /////////////                                           
 410   4      //ËøôÊó∂Â∞èËΩ¶Â§Ñ‰∫é2#ÊàøÈó¥3#ÊãêËßíÔºåÂáÜÂ§áÂ∑°Â∑¶Â¢ôÔºåÂπ∂Âú®Á¶ªÂ¢ô180ÊØ´Á±≥Â§ÑÂÅú‰∏ãÊù•
 411   4      ///////////////
 412   4                                                              
 413   4                                                              do
 414   4                                                              {
 415   5                                                                      Circulation_wall_left();
 416   5                                                              }while(front_dis >185);
 417   4                                      
 418   4                                                              car_stop();
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 8   

 419   4                                                              delay_ms(100);
 420   4                                                              
 421   4                                                              turn_left_90();
 422   4                                                              car_stop();//--------------2ÁÅ´-----------
 423   4                                                              
 424   4                                                              do
 425   4                                                              {
 426   5                                                                      Fan_On;
 427   5                                                                      delay_ms2(1500);
 428   5                                                                      break;
 429   5                                                              }
 430   4                                                              while(LeftFire==0||RightFire==0);
 431   4                                                              
 432   4                                                              //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú2ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå
 433   4                                                              do
 434   4                                                              {
 435   5                                                                      Fan_On;
 436   5                                                                      delay_ms2(500);     //ÂéüÊú¨ÊòØ1500   23 .05.26 Êîπ‰∏∫500Â∞ùËØï
 437   5                                                                      break;
 438   5                                                              }
 439   4                                                              while(LeftFire==0||RightFire==0);
 440   4                                                              
 441   4                                                      
 442   4                                                              Fan_Off;
 443   4                                                              //turn back 
 444   4              //                                              find_fire_turn_back_right();
 445   4              //                                              car_stop();
 446   4                                                              delay_ms(100);
 447   4                                                      
 448   4                                                              turn_left_90_big();
 449   4                                                              car_stop();
 450   4      
 451   4                                                      
 452   4                      //-----------------Èò≤ËØØÂà§-----2Âõû------     
 453   4                                                              prevent_time=0;
 454   4                                                              do
 455   4                                                              {
 456   5                                                                      Circulation_wall_right();
 457   5                                                                      prevent_time++;
 458   5                                                              }
 459   4                                                              while(right_dis < 400&& prevent_time<5);
 460   4                                                              prevent_time=0;
 461   4                                              //----------------------------------    
 462   4                                                                                      
 463   4                                              
 464   4                                                              do
 465   4                                                              {
 466   5                                                                      Circulation_wall_right();
 467   5                                                              }while(front_dis >198);//170,190-5.20     190ÂèØ‰ª•‰ΩøÁî® Á®çÂæÆËøë‰∏Ä‰∫õ---------------Êîπ  3.24  
             -195 ËøòÊòØÊúâÁÇπËøë   198
 468   4                                                      // now potion is cornre 3 of room 2,next action  turn left
 469   4                                                              car_stop();
 470   4                                                              turn_left_90();
 471   4                                                              
 472   4                                                              car_stop();
 473   4                                                      
 474   4                                                              if(candle_fire_3==0x01)
 475   4                                                              {
 476   5                                                                      do
 477   5                                                                      {
 478   6                                                                              Circulation_wall_right();
 479   6                                                                      }while(front_dis >190);//‰πãÂâçÊòØ210,170-5.20
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 9   

 480   5                                                                              car_stop();
 481   5                                                                        car_stop();
 482   5                                                                      
 483   5                                                                       do
 484   5                                                                      {
 485   6                                                                              Fan_On;//------------------3ÁÅ´---
 486   6                                                                              delay_ms2(2000);
 487   6                                                                              break;
 488   6                                                                      }
 489   5                                                                      while(LeftFire==0||RightFire==0);
 490   5                                                                      
 491   5                                                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú2ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå
 492   5                                                                      do
 493   5                                                                      {
 494   6                                                                              Fan_On;
 495   6                                                                              delay_ms2(1000);
 496   6                                                                              break;
 497   6                                                                      }
 498   5                                                                      while(LeftFire==0||RightFire==0);
 499   5                                                                      delay_ms(1);
 500   5                                                                      
 501   5                                                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú0.5ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå‰øùËØÅÂêπÁÅ≠
 502   5                                                                      while(LeftFire==0||RightFire==0)
 503   5                                                                      {
 504   6                                                                              Fan_On;
 505   6                                                                              delay_ms2(1000);
 506   6                                                                              delay_ms2(1000);
 507   6                                                                              break;
 508   6                                                                      }
 509   5                                                              
 510   5                                                                      Fan_Off;
 511   5                                                                      //////Âä†ÁöÑ
 512   5                                                                      delay_ms(150);
 513   5                                                                      //turn back 
 514   5              //                                                      find_fire_turn_back_right();
 515   5                                                                      turn_left_90();
 516   5                                                                      car_stop();
 517   5                                                                      goto only_fire_1_fire_9_fire_3_is_on_back_home;
 518   5                                                              }
 519   4                                                              
 520   4                                                              else //---------------Êó†3--
 521   4                                                              {
 522   5                                                                      do
 523   5                                                                      {
 524   6                                                                              Circulation_wall_right();
 525   6                                                                      }while(front_dis >188);  //180ÂèØ‰ª•Ëµ∞ Á®çÂæÆËøú    Êîπ  170Â§™Ëøë‰∫Ü  -------------------Êîπ  3.
             -24  175  178ÊúâÁÇπËøë   180ÂèØ‰ΩÜËøòÈúÄË¶ÅË∞ÉËäÇ  185‰πãÂâç
 526   5                                                                      car_stop();
 527   5                                                                      
 528   5                                                                      turn_left_90();
 529   5                                                                      
 530   5                                                                      goto only_fire_1_fire_9_fire_3_is_on_back_home;
 531   5                                                              }
 532   4                                              }
 533   3      
 534   3                                       else //------------------Êó†2---
 535   3                                       {
 536   4                                                      do
 537   4                                                      {
 538   5                                                              Circulation_wall_left();
 539   5                                                      }while(front_dis >170);
 540   4      
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 10  

 541   4                                                      
 542   4                                                      car_stop();     //  4.06Âä†  
 543   4                                              turn_left_90_big31();  //ÁÅ≠ÁÅ´‰πãÂâçËΩ¨ËøáÁöÑÂºØÂ§™Â∞è‰∫Ü
 544   4                                      //              turn_left_90();
 545   4                                                      car_stop();     //
 546   4                                                      do
 547   4                                                      {
 548   5                                                              Fan_On;//---------------ÁÅ≠3ÁÅ´
 549   5                                                              delay_ms2(3000);
 550   5                                                              break;
 551   5                                                      }
 552   4                                                      while(LeftFire==0||RightFire==0);
 553   4                                                      
 554   4                                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú2ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå
 555   4                                                      do
 556   4                                                      {
 557   5                                                              Fan_On;
 558   5                                                              delay_ms2(1);
 559   5                                                              break;
 560   5                                                      }
 561   4                                                      while(LeftFire==0||RightFire==0);
 562   4                                                      delay_ms2(1);
 563   4                                                      
 564   4                                                      //ÂÆ≥ÊÄïÊ≠ªÁÅ∞Â§çÁáÉÔºåÂÅú0.5ÁßíÔºåÂÜçÊ¨°Ê£ÄÊµãÔºå‰øùËØÅÂêπÁÅ≠
 565   4                                                      while(LeftFire==0||RightFire==0)
 566   4                                                      {
 567   5                                                              Fan_On;
 568   5                                                              delay_ms2(1000);
 569   5                                                              delay_ms2(1000);
 570   5                                                              break;
 571   5                                                      }
 572   4                                                      
 573   4                                                      Fan_Off;
 574   4                                                      //////Âä†ÁöÑ
 575   4                                                      delay_ms(100);
 576   4                                                      //turn back 
 577   4      //                                                      find_fire_turn_back_right();
 578   4      //                                                      car_stop();
 579   4                                              }
 580   3                                       turn_left_90_big_32();
 581   3                                              //turn_left_90();
 582   3                                              car_stop();
 583   3                                                      
 584   3                                              goto only_fire_1_fire_9_fire_3_is_on_back_home;
 585   3      
 586   3                                                      
 587   3                                                      
 588   3                                                      
 589   3      //---------------------ÂáÜÂ§áÂõûÂ§¥-------------------                                          
 590   3                                                      
 591   3              
 592   3      
 593   3      
 594   3      
 595   3                                                      
 596   3      
 597   3      /////////////////
 598   3      //
 599   3      //Âú®ÁùÄÁÅ´ÁÇπ3‰ΩçÁΩÆÔºåÂáÜÂ§áÈ©∂Âá∫2#ÊàøÈó¥ÔºåÂπ∂Âú®3#Ë°óÈÅìÂÅú‰∏ãÊù•ÔºåÁ¶ªÂ¢ô180ÊØ´Á±≥ÂÅú„ÄÇ
 600   3      ////////////////////                                            
 601   3                                              // now potion is cornre 3 of  room 2,next action  walk alone righr wall
 602   3      only_fire_1_fire_9_fire_3_is_on_back_home:                                              
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 11  

 603   3                                                      //-----------------Èò≤ËØØÂà§-----------
 604   3      //                                                              prevent_time=0;                                         
 605   3      //                                                              do
 606   3      //                                                              {
 607   3      //                                                                      Circulation_wall_right();
 608   3      //                                                                      prevent_time++;
 609   3      //                                                              }
 610   3      //                                                              while(right_dis < 200&&prevent_time<5);//È©∂Âá∫ÊàøÈó¥2Ëµ∞Âêë3Âè∑Ë°óÂå∫Âè≥‰æßË∑ùÁ¶ª39cm‚Äî‚ÄîËØ•‰
             -∏∫20cm-5.18
 611   3      //                                                              prevent_time=0;
 612   3      //                                                      //----------------------------------    
 613   3                                                      
 614   3                                                      
 615   3                                                      do
 616   3                                                      {
 617   4                                                              Circulation_wall_right();
 618   4                                                      }while(front_dis >410);
 619   3                                              // now potion is cornre 4 of room 2,next action  turn left
 620   3                                                      car_stop();
 621   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 622   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 623   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 624   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 625   3                                                      do
 626   3                                                      {
 627   4                                                                                                                  
 628   4      //                                               forward();
 629   4                                                              Circulation_wall_right();                
 630   4                                                      }while(front_dis >188);    ///     Âéü200     ----4.04  188
 631   3                                                      car_stop();
 632   3                                                      turn_left_90();
 633   3                                                      car_stop();
 634   3                                              // now potion is  door of room 2,and meanwhile at the street 3,next action   walk alone righr wall
 635   3      /////////////                                           
 636   3      //ËøôÊó∂Â∞èËΩ¶Â§Ñ‰∫é3#Â§ßË°óÔºåÂ∑°Âè≥Â¢ôËµ∞ÔºåÂπ∂Êâ´ÊèèÂ∑¶Â¢ôÔºåÁ®≥ÂÆöÂèëÁé∞Â∑¶Â¢ô
 637   3      ///////////////
 638   3      
 639   3                                                      left_300=0x00;
 640   3                                                      do
 641   3                                                      {
 642   4                                                              Circulation_wall_right();
 643   4                                                              left_dis= Ultrasonic_Get_Left();
 644   4                                                              
 645   4                                                              if(left_dis<300)
 646   4                                                              {
 647   5                                                                      left_300++;
 648   5                                                              }
 649   4                                                              else
 650   4                                                              {
 651   5                                                                      left_300=0x00;
 652   5                                                              }
 653   4                                                      }
 654   3                                                      while(left_dis>300||left_300<=3);//front_dis > 580||left_dis <600
 655   3      //                                              car_stop();
 656   3      //                                              car_stop();
 657   3                                                      
 658   3                                                      
 659   3                                                      
 660   3      /////////////                                           
 661   3      //ËøôÊó∂Â∞èËΩ¶Â§Ñ‰∫é3#Â§ßË°óÔºåÂèëÁé∞Â∑¶Â¢ôÔºåÂáÜÂ§áÂ∑°Â∑¶Â¢ôËµ∞ÔºåÂπ∂Âú®ÂâçÂ¢ô170ÊØ´Á±≥Â§ÑÂÅú‰∏ã
 662   3      ///////////////                                         
 663   3              
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 12  

 664   3                                                      do
 665   3                                                              
 666   3                                                      {
 667   4                                                              Circulation_wall_left();
 668   4                                                      }while(front_dis >210);   //200ÂèØ‰ª•‰ΩøÁî®   ÂèØ‰ª•Ë∞ÉÂ§ß‰∏Ä‰∫õ  ------------Êîπ210  3.24
 669   3                                                      car_stop();
 670   3                                                      turn_right_90();
 671   3      /////////////                                           
 672   3      //ËøôÊó∂Â∞èËΩ¶Â§Ñ‰∫é2#Â§ßË°óÂ∞ΩÂ§¥ÔºåÂáÜÂ§áÂ∑°Â∑¶Â¢ôËµ∞ÔºåÂπ∂Âú®ÂâçÂ¢ô170ÊØ´Á±≥Â§ÑÂÅú‰∏ã
 673   3      ///////////////                                                 
 674   3                                                      do
 675   3                                                              
 676   3                                                      {
 677   4                                                              Circulation_wall_left();
 678   4                                                      }while(front_dis >210);//ÂéüÊï∞ÊçÆ180
 679   3                                                      car_stop();
 680   3                                                      turn_right_back_90(); 
*** WARNING C206 IN LINE 680 OF main.c: 'turn_right_back_90': missing function-prototype
 681   3                                                      
 682   3      /////////////                                           
 683   3      //ËøôÊó∂Â∞èËΩ¶Â§Ñ‰∫é1#ÁùÄÁÅ´ÁÇπÔºåÂáÜÂ§áÂ∑°Â∑¶Â¢ôËµ∞ÔºåÂπ∂Âú®ÂâçÂ¢ô580ÊØ´Á±≥Â§ÑÂÅú‰∏ãÔºåÂπ∂ÊéâÂ§¥Ôºå‰∏∫‰∏ã
             -Ê¨°ÂêØÂä®ÂÅöÂáÜÂ§á
 684   3      /////////////// 
 685   3      only_fire_9_fire_1_is_on_back_home:                                             
 686   3                                                      car_stop();
 687   3                                                      
 688   3      only_fire1_is_on_back_home:     
 689   3                                                      
 690   3      //                                              i=0;
 691   3      //                                              do
 692   3      //                                              {
 693   3      //                                                      Circulation_wall_left();
 694   3      //                                              }while(i<=30);
 695   3                                                      
 696   3                                                      
 697   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 698   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 699   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 700   3                                                      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 701   3                                                      
 702   3                                                      do
 703   3                                                      {
 704   4                                                              Circulation_wall_left2();
 705   4                                                      }while(front_dis >580);
 706   3                                                      //car_stop();
 707   3                                                      //car_stop();   
 708   3      
 709   3                                                      do
 710   3                                                              
 711   3                                                      {
 712   4                                                              Circulation_wall_left2();
 713   4                                                      }while(front_dis >500);
 714   3      //                                              car_stop();                                                             
 715   3      
 716   3                                                      do
 717   3                                                              
 718   3                                                      {
 719   4                                                              Circulation_wall_left2();
 720   4                                                      }while(front_dis >410);//-------------10.15
 721   3                                                      do
 722   3                                                              
 723   3                                                      {
C51 COMPILER V9.60.7.0   MAIN                                                              11/03/2023 20:13:14 PAGE 13  

 724   4                                                              Circulation_wall_left2();
 725   4                                                      }while(front_dis >410);//-------------10.15
 726   3                                                      do
 727   3                                                              
 728   3                                                      {
 729   4                                                              Circulation_wall_left2();
 730   4                                                      }while(front_dis >410);//-------------10.15
 731   3                                                      do
 732   3                                                              
 733   3                                                      {
 734   4                                                              Circulation_wall_left2();
 735   4                                                      }while(front_dis >410);//-------------10.15
 736   3                                                      car_stop();
 737   3                                                      car_stop();     
 738   3                                                      delay_ms(100);
 739   3                                                      car_stop();
 740   3                                                      while(1);
 741   3                                                      
 742   3                      }
 743   2        }
 744   1      }
 745                                  
*** WARNING C294 IN LINE 84 OF main.c: unreachable code
*** WARNING C294 IN LINE 93 OF main.c: unreachable code
*** WARNING C294 IN LINE 211 OF main.c: unreachable code
*** WARNING C294 IN LINE 220 OF main.c: unreachable code
*** WARNING C294 IN LINE 430 OF main.c: unreachable code
*** WARNING C294 IN LINE 439 OF main.c: unreachable code
*** WARNING C294 IN LINE 489 OF main.c: unreachable code
*** WARNING C294 IN LINE 498 OF main.c: unreachable code
*** WARNING C294 IN LINE 552 OF main.c: unreachable code
*** WARNING C294 IN LINE 561 OF main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1684    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  11 WARNING(S),  0 ERROR(S)
