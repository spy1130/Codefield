C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "ultrasonic.h"
   2          #include "action.h"
   3          #include "motor.h"
   4          #include "key.h"
   5          
   6          
   7          /**********************å®šä¹‰æŸäº›ç®¡è„š********************/
   8          bit candle_fire_1=0x00;//  1 is fire on ; 0 is extinguish
   9          bit candle_fire_9=0x00;//  1 is fire on ; 0 is extinguish
  10          bit candle_fire_3=0x01;////  1 is fire on ; 0 is extinguish
  11          bit candle_fire_2=0x01;////  1 is fire on ; 0 is extinguish
  12          
  13          
  14          sbit Fan = P0^0;
  15          sbit LeftFire = P0^2;
  16          sbit RightFire = P0^3;
  17          
  18          #define Fan_On {Fan = 0;}
  19          #define Fan_Off {Fan = 1;}
  20          
  21          
  22          
  23          unsigned char prevent_time = 0;
  24          unsigned int left_300 = 0;
  25          unsigned int right_900 = 0;
  26          unsigned int pwm_num = 0;
  27          unsigned int room_2_pwm_num = 0;
  28          unsigned int left_time=0;
  29          
  30          
  31          /******************ä¸»å‡½æ•°***************
  32          **************å®ç°åŠŸèƒ½ç§»åŠ¨ç­ç«**********/
  33          void main()
  34          {
  35   1        LED = 1;//äº®ç¯æŒ‡ç¤º
  36   1        Timer0Init();//å·¦è½®PWM
  37   1        Timer1Init();//å³è½®PWM
  38   1        Ultrasonic_Init();
  39   1        while(1)
  40   1        { 
  41   2          keyscan();//æŒ‰é”®æ£€æµ‹
  42   2          if(start==1)
  43   2          {
  44   3            /**********************æµ‹è¯•å³è½¬180Â°********************/
  45   3              turn_left_90();
  46   3      
  47   3              car_stop(); 
  48   3      //      
  49   3              while(1);//for(;;);
  50   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  51   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  52   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  53   3            front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
  54   3            right_dis= Ultrasonic_Get_Right();//å¾—åˆ°ä¸€æ¬¡å³è¶…å£°æ³¢æµ‹è·æ¨¡å—çš„è·ç¦»
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 2   

  55   3            left_dis= Ultrasonic_Get_Left();//å¾—åˆ°ä¸€æ¬¡å·¦è¶…å£°æ³¢æµ‹è·æ¨¡å—çš„è·ç¦»
  56   3            right_dis= Ultrasonic_Get_Right();
  57   3            left_dis= Ultrasonic_Get_Left();
  58   3            right_dis= Ultrasonic_Get_Right();
  59   3            left_dis= Ultrasonic_Get_Left();
  60   3            
  61   3            
  62   3            goto aaa;//è·³è½¬aaa
  63   3          //////////////////
  64   3      aaa:
  65   3            if(candle_fire_1==0x01)
  66   3            {
  67   4              do                   
  68   4              { 
  69   5                Circulation_wall_right();               
  70   5              }
  71   4              while(front_dis > 189 );/////   23.05.25   182cm   å¤ªè¿‘è¿˜éœ€è°ƒæ•´   185cm è¿˜æ˜¯æœ‰ç‚¹è¿‘
  72   4              //now position is fire 1,and next step find fire 1      
  73   4              car_stop(); 
  74   4              
  75   4                    
  76   4              ////find_fire_turn_right();
  77   4              //now position is fire 1,and next step put off  fire 1    
  78   4              car_stop();
  79   4              
  80   4              do
  81   4              {
  82   5                Fan_On;     //-----------------ç­1---------------------
  83   5                delay_ms(1500);
  84   5                break;
  85   5              }
  86   4              while(LeftFire==0||RightFire==0);
  87   4              
  88   4              //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
  89   4              do
  90   4              {
  91   5                Fan_On;
  92   5                delay_ms(1500);  //åŸæœ¬æ˜¯1500çš„   23 .05.26 æ”¹ä¸º500å°è¯•ä¸€ä¸‹
  93   5                break;
  94   5              }
  95   4              while(LeftFire==0||RightFire==0);
  96   4                    
  97   4              //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
  98   4              
  99   4              Fan_Off;
 100   4              //////åŠ çš„
 101   4              delay_ms(150);
 102   4                //now position is fire 1,and next turn back       
 103   4                    
 104   4      //              find_fire_turn_back_left();
 105   4                    
 106   4                //now position is fire 1,and next turn left         
 107   4              car_stop();
 108   4              
 109   4              if(candle_fire_9==0x00&&candle_fire_3==0x00&&candle_fire_2==0x00)
 110   4              {
 111   5                turn_right_180();
 112   5                goto only_fire1_is_on_back_home;//ç­1è¿”èˆª
 113   5              }
 114   4              turn_left_90();//
 115   4              car_stop();
 116   4              
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 3   

 117   4            }
 118   3            else//----------------------1æ— ç«-----------------------
 119   3            {
 120   4              do                   //ä¸€å·æˆ¿é—´
 121   4              {
 122   5                Circulation_wall_right(); 
 123   5                //walkalone_left_1();               
 124   5              }
 125   4              while(front_dis > 182);//ç­ä¸€å·ç«çš„è·ç¦»
 126   4        //now position is fire 1,and next step find fire 1      
 127   4              car_stop();
 128   4              turn_left_90();//
 129   4            }
 130   3            /////////////////
 131   3      //
 132   3      //ä»1#ç€ç«ç‚¹å‡ºå‘ï¼Œå‡†å¤‡å¯»æ‰¾1#æˆ¿é—´çš„å¤§é—¨ä¸­å¤®ï¼Œä¼å›¾è¿›å…¥1å·æˆ¿é—´å¤§é—¨ã€‚
 133   3      //ä¸ºäº†é˜²æ­¢è¯¯åˆ¤ï¼Œæ£€æµ‹å¤§é—¨ï¼Œæ£€æµ‹ä¸¤æ¬¡ï¼ŒåŸå› æ˜¯åˆä¸€æ¬¡å‘ç°æµ‹ä¸å‡†è¿˜åœ¨1#ç€ç«ç‚¹ï¼Œ
             -å´è¯¯è®¤ä¸ºè‡ªå·±åœ¨1#å·æˆ¿é—´é—¨å£
 134   3      ////////////////////
 135   3              //now position is fire 1,and next walk alone withe the right wall 
 136   3               front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//å¡å°”æ›¼æ»¤æ³¢
 137   3               left_dis= Ultrasonic_Get_Left();
 138   3               right_dis= Ultrasonic_Get_Right();
 139   3               if(candle_fire_9==0x01)
 140   3               {
 141   4                  i=0;
 142   4                  do                   //ä¸€å·æˆ¿é—´
 143   4                  {
 144   5                    Circulation_wall_right();
 145   5                  }
 146   4                  while(i<=30);
 147   4                  //ä¸ºäº†é˜²æ­¢è¯¯åˆ¤ï¼Œå‘ç°ä¸€å·æˆ¿é—´é—¨å£ æ‰§è¡Œä¸¤æ¬¡ã€‚å› ä¸ºè°ƒè¯•è¿‡ç¨‹ä¸­åœ¨ç«ç„°1å¤„åº”
             -ä¸ºå‰æ–¹è¶…å£°æµ‹è·é”™è¯¯ï¼Œæµ‹æˆ514æ¯«ç±³ï¼Œå®é™…åº”ä¸º1200æ¯«ç±³
 148   4                  //ï¼Œå¯¼è‡´æ»¡è¶³while(front_dis > 550||left_dis <600)æ¡ä»¶ï¼Œæ˜¯çš„å•ç‰‡æœºæœ¬åœ¨ç«ç„°1è¯¯è®¤ä¸º
             -åœ¨ä¸€å·æˆ¿é—´é—¨å£ï¼Œæ‰€ä»¥å†™ä¸¤æ¬¡
 149   4                  //å¸Œæœ›å‰æ–¹è¶…å£°æµ‹è·ä¸è¦çŒœæµ‹é”™äº†ã€‚
 150   4                      
 151   4                  delay_ms(100);
 152   4                    
 153   4                  left_dis= Ultrasonic_Get_Left();//å·¦ä¾§æ£€æŸ¥
 154   4                  right_dis= Ultrasonic_Get_Right();//å³ä¾§æ£€æŸ¥
 155   4                  
 156   4                  do                   //è¿›å…¥ä¸€å·æˆ¿é—´å‰â€”â€”å¯»æ‰¾å³å¢™
 157   4                  {
 158   5                    Circulation_wall_right();
 159   5                    left_dis= Ultrasonic_Get_Left();
 160   5                  }
 161   4                  while(front_dis > 580||left_dis <600);  //front_dis=660
 162   4                  
 163   4                  car_stop();
 164   4                  //now position is middle gate of room 1,and next action turn left 
 165   4                  delay_ms(50);
 166   4      
 167   4                  //          
 168   4                  /////////////////
 169   4                  //
 170   4                  //åœ¨1#æˆ¿é—´å¤§é—¨ä¸­å¤®ã€‚å‡†å¤‡è¿›å…¥å¤§é—¨ï¼Œå¹¶å·¡å³å¢™ åœ¨ç¦»å¢™177æ¯«ç±³å¤„åœä¸‹æ¥
 171   4                  ////////////////////            
 172   4                      
 173   4                  turn_left_90();          //è¿›å…¥æˆ¿é—´1
 174   4                      
 175   4                  //now position is middle gate of room 1,and next action pass through gate and walk alone with right 
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 4   

             -wall         ///////////////  
 176   4                  do
 177   4                  {
 178   5                    Circulation_wall_right();     
 179   5                  }
 180   4                  while(front_dis > 215);//æ”¹ä¸º20-5.19ï¼Œ23-5.20   230  250    230  210åˆé€‚
 181   4                  delay_ms(50);//-------------------
 182   4                //now position is corner 1 of room 1,and next action turn left
 183   4                  car_stop();
 184   4                  turn_left_90_big();             //å·¦è½¬
 185   4          //          
 186   4          /////////////////
 187   4          //
 188   4          //åœ¨1#æˆ¿é—´1å·æ‹è§’ï¼Œå‡†å¤‡å‰å¾€9#ç€ç«ç‚¹ã€‚å¹¶ç­ç«
 189   4          ////////////////////            
 190   4                      
 191   4                  //now position is corner 1 of room 1,and next action wanlk alone with right wall
 192   4                  do
 193   4                  {
 194   5                        Circulation_wall_right(); //å¯»å³å¢™   
 195   5                  }
 196   4                  while(front_dis > 220);//åŸæ•°æ®185æ”¹160-5.18ï¼Œ19-5.20,21-5.25     210   215
 197   4                  //now position is corner 2 of room 1,and next action find fire 2  
 198   4                  car_stop();
 199   4                  
 200   4                  //////begin find fire/////////////////////////
 201   4                  //
 202   4                  //car_stop();
 203   4      //                find_fire_turn_right();
 204   4                  
 205   4              //now position is corner 2 of room 1,and next action put off fire 2     
 206   4                      
 207   4                  do
 208   4                  {
 209   5                    Fan_On;     //-----------------ç­9ç«---------
 210   5                    delay_ms(1500);
 211   5                    break;
 212   5                  }
 213   4                  while(LeftFire==0||RightFire==0);
 214   4                  
 215   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 216   4                  do
 217   4                  {
 218   5                    Fan_On;
 219   5                    delay_ms(500);         //  23.05.26  æ”¹ä¸º 500ms  åŸæœ¬1500
 220   5                    break;
 221   5                  }
 222   4                  while(LeftFire==0||RightFire==0);
 223   4                  
 224   4                      
 225   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
 226   4                  while(LeftFire==0||RightFire==0)
 227   4                  {
 228   5                    Fan_On;
 229   5                    delay_ms(1000);
 230   5                    break;
 231   5                  }
 232   4                      
 233   4                  Fan_Off;
 234   4                  //////åŠ çš„
 235   4                  delay_ms(100);
 236   4                  //now position is corner 2 of room 1,and next action turn back  
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 5   

 237   4      //                find_fire_turn_back_left();
 238   4                      
 239   4                      
 240   4                  //now position is corner 2 of room 1,and next action turn 180 degree  
 241   4                  car_stop();
 242   4                  turn_right_180();//å³è½¬æœ‰180Â°ä¸è¶³â€”â€”å·²è§£å†³
 243   4                  
 244   4                  
 245   4                  /******************************æœ‰è¯¯çš„åœ°æ–¹*******************************/
 246   4                  /*******************************å·²ç»è§£å†³********************************/
 247   4          /////////////////
 248   4          //
 249   4          //åœ¨9#ç€ç«ç‚¹ï¼Œå‡†å¤‡ç¦»å¼€ç€ç«ç‚¹ï¼Œå·¡å·¦å¢™ã€‚åœ¨ç¦»å¢™160æ¯«ç±³å¤„åœä¸‹æ¥
 250   4          ////////////////////              
 251   4                      ///////////////////////////////
 252   4                  //now position is corner 2 of room 1,and next action walk alone with left wall  
 253   4                    //-----------------é˜²è¯¯åˆ¤----------- 
 254   4                  i=0;
 255   4                  do
 256   4                  {
 257   5                    Circulation_wall_left();  //å¯»å·¦å¢™
 258   5                  }
 259   4                  while(left_dis < 390 && i < 24);//iåŸæ•°æ®ä¸º12æ”¹ä¸º-24ï¼Œ5-18
 260   4                  
 261   4                  
 262   4                //----------------------------------  
 263   4                  
 264   4                  do
 265   4                  {
 266   5              //      front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//å¡å°”æ›¼æ»¤æ³¢     3.28åˆ é™¤
 267   5                    Circulation_wall_left();  //å¯»å·¦å¢™   
 268   5                  }
 269   4                  while(front_dis > 190);//18cmï¼Œ230-5.20    3.23-260    180åˆé€‚   175ç¨å¾®æœ‰ç‚¹ç´§    
 270   4                // turn right at the cornner 1  
 271   4                  car_stop();
 272   4                  turn_right_90_small();
 273   4                  
 274   4          //////////////////
 275   4            
 276   4      //å¼€æœºå‡ºå‘ï¼Œå·¡å³å¢™ï¼Œåœ¨ç¦»å¢™180æ¯«ç±³å¤„åœä¸‹
 277   4      //å¹¶åœ¨3#è¡—é“åœä¸‹æ¥ï¼Œç¦»å¢™180æ¯«ç±³åœã€‚
 278   4      // now potion is cornre 3 of  room 2,next action  walk alone right wall
 279   4          ///////////////////
 280   4                  /////////////////
 281   4          //
 282   4          //åœ¨1#æˆ¿é—´ï¼Œæ‹è§’1ï¼Œå‡†å¤‡ç¦»å¼€ä¸€å·æˆ¿é—´ï¼Œå·¡å·¦å¢™èµ°ï¼Œåœ¨ç¦»å¢™160æ¯«ç±³å¤„åœä¸‹æ¥
 283   4          ////////////////////  19å¹´æ”¹190           
 284   4      
 285   4                      
 286   4                    /// now postion is room 1 corner 1 and walk alone left wall  and next action stop at the street 
 287   4                  do
 288   4                  {
 289   5            //        front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);//å¡å°”æ›¼æ»¤æ³¢   3.28åˆ é™¤
 290   5                    Circulation_wall_left();//å¯»å·¦å¢™     
 291   5                  }
 292   4                  while(front_dis > 230);//é©¶å‡ºåˆ°1å·æˆ¿é—´å‡ºå£1#è¡—åŒºå¤„å‰å¢™19cm   23cmåˆé€‚
 293   4                  
 294   4                // now potion is street and nearby is the gate of room1 ,turn left 90 degree. 
 295   4                  
 296   4                   car_stop();
 297   4                      
 298   4                  if(candle_fire_3==0x00&&candle_fire_2==0x00)//èœ¡çƒ›2å’Œèœ¡çƒ›3ç­
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 6   

 299   4                  {
 300   5                    turn_right_90();//-----------------å›å®¶
 301   5                    do
 302   5                    {
 303   6                      Circulation_wall_left();  //å¯»å·¦å¢™   
 304   6                    }
 305   5                    while(front_dis > 200);//å‰æ–¹20cmå¤„
 306   5                    
 307   5                    
 308   5                    /********************************å³è½¬å›å®¶å®¶******************************/
 309   5                    turn_right_90();
 310   5                    goto only_fire_9_fire_1_is_on_back_home;//ç­èœ¡çƒ›1å’Œèœ¡çƒ›9åå›å®¶
 311   5                  }
 312   4                  
 313   4                  
 314   4                  
 315   4                  /******************å‡ºå»1#å*********************/
 316   4                  turn_left_90();
 317   4          /////////////////
 318   4          //
 319   4          //åœ¨1#æˆ¿é—´é—¨å£ï¼Œä¸”å¤„åœ¨2#è¡—é“ä¸Šï¼Œå¹¶ç¦»å¢™160æ¯«ç±³ã€‚å‡†å¤‡å·¡å³å¢™èµ°åˆ°2#å¤§è¡—å°½å¤´ï¼Œ
 320   4          ////////////////////              
 321   4                      ///////////////////////////////           
 322   4                      
 323   4                    // now potion is street and nearby is the gate of room1 walk alone right.and next action stop at th
             -e end of street   
 324   4                  do
 325   4                  {
 326   5                    Circulation_wall_right();     
 327   5                  }
 328   4                  while(front_dis > 200);//180   
 329   4      
 330   4                    // now potion is end of street 2 ,next action is turn left 90   
 331   4                  car_stop();
 332   4                  
 333   4                  turn_left_90();//å·¦è½¬90Â°è¿›å»ä¸€å·æˆ¿é—´å’ŒäºŒå·æˆ¿é—´çš„ä¸­é—´è¿‡é“
 334   4                }
 335   3                  
 336   3                else if(candle_fire_3==0x01||candle_fire_2==0x01)//èœ¡çƒ›2èœ¡çƒ›3ç‡ƒçƒ§
 337   3                {
 338   4                  do
 339   4                  {
 340   5                    Circulation_wall_right(); //å¯»å³å¢™   
 341   5                  }
 342   4                    while(front_dis > 200);//è·ç¦»äºŒå·æˆ¿é—´å‰æ–¹17.7cmå¤„å·¦è½¬90Â°ï¼Œ200-5.20
 343   4                  // now potion is end of street 2 ,next action is turn left 90   
 344   4                  car_stop();
 345   4                  turn_left_90();
 346   4                }
 347   3                  /***********************æ²¡ææ‡‚5-18**********************/
 348   3                else
 349   3                {
 350   4                  turn_left_90();//è¿™é‡Œå›å®¶
 351   4                  goto only_fire1_is_on_back_home;
 352   4                }
 353   3            
 354   3      
 355   3      //
 356   3      //åœ¨2#è¡—é“çš„å°½ç«¯ï¼Œå‡†å¤‡å‰å¾€2#æˆ¿é—´ã€‚å…ˆå·¡å³å¢™èµ°ï¼Œå‘ç°å·¦å¢™ï¼Œç«‹åˆ»å·¡å·¦å¢™ï¼Œä¸€ç›´è
             -µ°åˆ°2#æˆ¿é—´å¤§é—¨ä¸­å¤®
 357   3      ////////////////////            
 358   3                // now potion is end of street2,next action iswalk alone right wall   
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 7   

 359   3                //è¿™ä¸€æ®µç¨‹åºè¾ƒä¸ºéº»çƒ¦ã€‚é€ æˆéº»çƒ¦çš„åŸå› æ˜¯å¤„äºæ‹è§’æ—¶ï¼Œæµ‹å³å¢™æ•°æ®å¤„äºæ··æ²Œ
             -çŠ¶æ€ï¼Œåº”è¯¥ä¸º172æ¯«ç±³ï¼Œå¯æ˜¯å¤„äºç›´è§’è¾¹ç¼˜æ—¶
 360   3                  //æ•°æ®å˜å¤§ï¼Œç”šè‡³èƒ½å˜æˆ220,250ï¼Œä¹ƒè‡³300å¤šï¼Œè€Œä¸”è¿™ä¸ªæ··æ²ŒåŒºåŸŸé•¿åº¦è¿˜ä¸å°ï¼Œæ
             -œ‰å¤§çº¦50æ¯«ç±³ã€‚
 361   3                  
 362   3      /////////////////
 363   3      //
 364   3      //å…ˆå·¡å³å¢™èµ°ï¼Œä¸€ç›´æœç´¢å·¦å¢™ï¼Œç›´åˆ°ç¨³å®šçš„å‘ç°å·¦å¢™ï¼Œ
 365   3      ////////////////////
 366   3                
 367   3                
 368   3                
 369   3                
 370   3                  left_300=0x00;
 371   3                  do
 372   3                  {
 373   4                    Circulation_wall_right();//å…ˆå¯»å³å¢™
 374   4                    left_dis= Ultrasonic_Get_Left();
 375   4                    
 376   4                    if(left_dis<300)
 377   4                    {
 378   5                      left_300++;
 379   5                    }
 380   4                    else
 381   4                    {
 382   5                      left_300=0x00;
 383   5                    }
 384   4                  }
 385   3                  while(left_dis>300||left_300<=3);//front_dis > 580||left_dis <600
 386   3                  //car_stop();
 387   3                  //car_stop();
 388   3                  
 389   3      /////////////           
 390   3      //è¿™æ—¶å°è½¦3#è¡—é“å·¦å¢™é¦–ç«¯ï¼Œä¸‹é¢å¼€å§‹å¯»æ‰¾å·¦å¢™èµ°ï¼Œå³è¾¹æœ‰ç¨³å®šçš„å¤§äº800çš„æ•°æ®ï¼Œ
             -è¿™å°±æ˜¯åˆ°äº†2å·æˆ¿é—´çš„é—¨è¾¹ç¼˜
 391   3      ///////////////
 392   3                
 393   3                  right_900=0;
 394   3                  do
 395   3                  {
 396   4                    Circulation_wall_right();
 397   4                    
 398   4                    if(right_dis>800)
 399   4                    {
 400   5                      right_900++;
 401   5                      if(right_900>=0x03)
 402   5                      {
 403   6                        car_stop();
 404   6                        break;
 405   6                      }
 406   5                    }
 407   4                    else
 408   4                    {
 409   5                      right_900=0x00;
 410   5                    }
 411   4                  }while(right_dis<800||right_dis<=3);
 412   3                  
 413   3                  
 414   3                  car_stop();
 415   3      /***************************************æ­¤å¤„æœ‰é—®é¢˜*****************************/
 416   3                  /************************æ— æ³•è¿›å…¥2#æˆ¿é—´***************************/
 417   3                  /**************************é—®é¢˜å·²è§£å†³*****************************/
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 8   

 418   3                  //while(front_dis > 1400||right_dis <600);//front_dis > 580||left_dis <600
 419   3                // now potion is begin of door of room 2,next action is walk forward 20 cm  
 420   3      //            car_stop();
 421   3                  
 422   3      /////////////           
 423   3      //è¿™æ—¶å°è½¦2å·æˆ¿é—´å¤§é—¨å£ï¼Œä½†ä¸æ˜¯å¤§é—¨ä¸­å¤®ï¼Œå‡†å¤‡å‰å¾€å¤§é—¨ä¸­å¤®
 424   3      ///////////////
 425   3      
 426   3                  i=0x00;
 427   3                  
 428   3                  do
 429   3                  {
 430   4                    Circulation_wall_right();//å¯»å³å¢™
 431   4                    
 432   4                    }while(i<=44);  //50æ”¹ä¸º44   44    48  45
 433   3                  
 434   3                // now potion is middle of door of room 2,next action isturn right 90 
 435   3                  car_stop();
 436   3                    car_stop();
 437   3                  turn_right_90();//å³è½¬90Â°
 438   3          
 439   3                // now potion is middle of door of room 2,next action isturn walk alone left 2  
 440   3      /////////////           
 441   3      //è¿™æ—¶å°è½¦2å·æˆ¿é—´å¤§é—¨å£ä¸­å¤®ï¼Œå‡†å¤‡è¿›å…¥2#æˆ¿é—´ï¼Œå¹¶åœ¨2å·æˆ¿é—´3#ç€ç«ç‚¹å¤„åœä¸‹æ¥ï¼
             -Œç¦»å¢™180æ¯«ç±³åœä¸‹æ¥
 442   3      ///////////////
 443   3                  
 444   3      /////////////     ///////////////////     
 445   3      //ä¿®æ”¹è·¯å¾„2019-10-2///////////////
 446   3      ////////////////////////////
 447   3                                
 448   3                  do  
 449   3                  {
 450   4                    Circulation_wall_left();//å¯»å·¦å¢™ä¿æŒ18cm
 451   4                  }while(front_dis >230);//180,210-5.20
 452   3      
 453   3                  car_stop(); 
 454   3                    
 455   3                  if(candle_fire_2==0x01)//èœ¡çƒ›2ç‡ƒçƒ§
 456   3                  {
 457   4                    turn_right_90_small();//å³è½¬90Â°
 458   4                    car_stop();
 459   4                    /*******************å››æ¬¡å¡å°”æ›¼æ»¤æ³¢æ˜¯å¹²ä»€ä¹ˆï¼Ÿ*********************/
 460   4                    /*********************æ­¤å¤„ä¹Ÿæœ‰é—®é¢˜ï¼******************/
 461   4                    /******************é—®é¢˜å·²è§£å†³æ”¹å˜è½¬å¼¯å»¶è¿Ÿ**********************/
 462   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 463   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 464   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 465   4                    front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 466   4                    do
 467   4                    {
 468   5                      Circulation_wall_left();
 469   5                    }while(front_dis >195);//å‰è·ç¦»20cmï¼Œ190-5.20     190å¯ä»¥ä½¿ç”¨ ç¨å¾®è¿‘ä¸€äº›  
 470   4                  
 471   4                    car_stop();
 472   4                    turn_right_90();
 473   4                    car_stop();
 474   4      /////////////           
 475   4      //è¿™æ—¶å°è½¦å¤„äº2#æˆ¿é—´3#æ‹è§’ï¼Œå‡†å¤‡å·¡å·¦å¢™ï¼Œå¹¶åœ¨ç¦»å¢™180æ¯«ç±³å¤„åœä¸‹æ¥
 476   4      ///////////////
 477   4                    
 478   4                    do
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 9   

 479   4                    {
 480   5                      Circulation_wall_left();
 481   5                    }while(front_dis >185);
 482   4              
 483   4                    car_stop();
 484   4                    delay_ms(100);
 485   4                    
 486   4                    turn_left_90_big();
 487   4                    car_stop();//--------------2ç«-----------
 488   4                    
 489   4                    do
 490   4                    {
 491   5                      Fan_On;
 492   5                      delay_ms(1500);
 493   5                      break;
 494   5                    }
 495   4                    while(LeftFire==0||RightFire==0);
 496   4                    
 497   4                    //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 498   4                    do
 499   4                    {
 500   5                      Fan_On;
 501   5                      delay_ms(500);     //åŸæœ¬æ˜¯1500   23 .05.26 æ”¹ä¸º500å°è¯•
 502   5                      break;
 503   5                    }
 504   4                    while(LeftFire==0||RightFire==0);
 505   4                    
 506   4                  
 507   4                    Fan_Off;
 508   4                    //turn back 
 509   4        //            find_fire_turn_back_right();
 510   4        //            car_stop();
 511   4                    delay_ms(100);
 512   4                  
 513   4                    turn_left_90_big();
 514   4                    car_stop();
 515   4      
 516   4                  
 517   4                      //-----------------é˜²è¯¯åˆ¤-----2å›------ 
 518   4                    prevent_time=0;
 519   4                    do
 520   4                    {
 521   5                      Circulation_wall_right();
 522   5                      prevent_time++;
 523   5                    }
 524   4                    while(right_dis < 400&& prevent_time<5);
 525   4                    prevent_time=0;
 526   4                //----------------------------------  
 527   4                          
 528   4                
 529   4                    do
 530   4                    {
 531   5                      Circulation_wall_right();
 532   5                    }while(front_dis >198);//170,190-5.20     190å¯ä»¥ä½¿ç”¨ ç¨å¾®è¿‘ä¸€äº›---------------æ”¹  3.24  
             -195 è¿˜æ˜¯æœ‰ç‚¹è¿‘   198
 533   4                  // now potion is cornre 3 of room 2,next action  turn left
 534   4                    car_stop();
 535   4                    turn_left_90();
 536   4                    
 537   4                    car_stop();
 538   4                  
 539   4                    if(candle_fire_3==0x01)
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 10  

 540   4                    {
 541   5                      do
 542   5                      {
 543   6                        Circulation_wall_right();
 544   6                      }while(front_dis >190);//ä¹‹å‰æ˜¯210,170-5.20
 545   5                        car_stop();
 546   5                        car_stop();
 547   5                      
 548   5                       do
 549   5                      {
 550   6                        Fan_On;//------------------3ç«---
 551   6                        delay_ms(2000);
 552   6                        break;
 553   6                      }
 554   5                      while(LeftFire==0||RightFire==0);
 555   5                      
 556   5                      //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 557   5                      do
 558   5                      {
 559   6                        Fan_On;
 560   6                        delay_ms(1000);
 561   6                        break;
 562   6                      }
 563   5                      while(LeftFire==0||RightFire==0);
 564   5                      delay_ms(1);
 565   5                      
 566   5                      //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
 567   5                      while(LeftFire==0||RightFire==0)
 568   5                      {
 569   6                        Fan_On;
 570   6                        delay_ms(1000);
 571   6                        delay_ms(1000);
 572   6                        break;
 573   6                      }
 574   5                    
 575   5                      Fan_Off;
 576   5                      //////åŠ çš„
 577   5                      delay_ms(150);
 578   5                      //turn back 
 579   5        //              find_fire_turn_back_right();
 580   5                      turn_left_90();
 581   5                      car_stop();
 582   5                      goto only_fire_1_fire_9_fire_3_is_on_back_home;
 583   5                    }
 584   4                    
 585   4                    else //---------------æ— 3--
 586   4                    {
 587   5                      do
 588   5                      {
 589   6                        Circulation_wall_right();
 590   6                      }while(front_dis >188);  //180å¯ä»¥èµ° ç¨å¾®è¿œ    æ”¹  170å¤ªè¿‘äº†  -------------------æ”¹  3.
             -24  175  178æœ‰ç‚¹è¿‘   180å¯ä½†è¿˜éœ€è¦è°ƒèŠ‚  185ä¹‹å‰
 591   5                      car_stop();
 592   5                      
 593   5                      turn_left_90();
 594   5                      
 595   5                      goto only_fire_1_fire_9_fire_3_is_on_back_home;
 596   5                    }
 597   4                }
 598   3      
 599   3               else //------------------æ— 2---
 600   3               {
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 11  

 601   4                  do
 602   4                  {
 603   5                    Circulation_wall_left();
 604   5                  }while(front_dis >170);
 605   4      
 606   4                  
 607   4                  car_stop();     //  4.06åŠ   
 608   4                turn_left_90_big31();  //ç­ç«ä¹‹å‰è½¬è¿‡çš„å¼¯å¤ªå°äº†
 609   4              //    turn_left_90();
 610   4                  car_stop();     //
 611   4                  do
 612   4                  {
 613   5                    Fan_On;//---------------ç­3ç«
 614   5                    delay_ms(3000);
 615   5                    break;
 616   5                  }
 617   4                  while(LeftFire==0||RightFire==0);
 618   4                  
 619   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ2ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œ
 620   4                  do
 621   4                  {
 622   5                    Fan_On;
 623   5                    delay_ms(1);
 624   5                    break;
 625   5                  }
 626   4                  while(LeftFire==0||RightFire==0);
 627   4                  delay_ms(1);
 628   4                  
 629   4                  //å®³æ€•æ­»ç°å¤ç‡ƒï¼Œåœ0.5ç§’ï¼Œå†æ¬¡æ£€æµ‹ï¼Œä¿è¯å¹ç­
 630   4                  while(LeftFire==0||RightFire==0)
 631   4                  {
 632   5                    Fan_On;
 633   5                    delay_ms(1000);
 634   5                    delay_ms(1000);
 635   5                    break;
 636   5                  }
 637   4                  
 638   4                  Fan_Off;
 639   4                  //////åŠ çš„
 640   4                  delay_ms(100);
 641   4                  //turn back 
 642   4      //              find_fire_turn_back_right();
 643   4      //              car_stop();
 644   4                }
 645   3               turn_left_90_big_32();
 646   3                //turn_left_90();
 647   3                car_stop();
 648   3                  
 649   3                goto only_fire_1_fire_9_fire_3_is_on_back_home;
 650   3      
 651   3                  
 652   3                  
 653   3                  
 654   3      //---------------------å‡†å¤‡å›å¤´-------------------            
 655   3                  
 656   3        
 657   3      
 658   3      
 659   3      
 660   3                  
 661   3      
 662   3      /////////////////
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 12  

 663   3      //
 664   3      //åœ¨ç€ç«ç‚¹3ä½ç½®ï¼Œå‡†å¤‡é©¶å‡º2#æˆ¿é—´ï¼Œå¹¶åœ¨3#è¡—é“åœä¸‹æ¥ï¼Œç¦»å¢™180æ¯«ç±³åœã€‚
 665   3      ////////////////////            
 666   3                // now potion is cornre 3 of  room 2,next action  walk alone righr wall
 667   3      only_fire_1_fire_9_fire_3_is_on_back_home:            
 668   3                  //-----------------é˜²è¯¯åˆ¤-----------
 669   3      //                prevent_time=0;           
 670   3      //                do
 671   3      //                {
 672   3      //                  Circulation_wall_right();
 673   3      //                  prevent_time++;
 674   3      //                }
 675   3      //                while(right_dis < 200&&prevent_time<5);//é©¶å‡ºæˆ¿é—´2èµ°å‘3å·è¡—åŒºå³ä¾§è·ç¦»39cmâ€”â€”è¯¥ä
             -¸º20cm-5.18
 676   3      //                prevent_time=0;
 677   3      //              //----------------------------------  
 678   3                  
 679   3                  
 680   3                  do
 681   3                  {
 682   4                    Circulation_wall_right();
 683   4                  }while(front_dis >410);
 684   3                // now potion is cornre 4 of room 2,next action  turn left
 685   3                  car_stop();
 686   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 687   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 688   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 689   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 690   3                  do
 691   3                  {
 692   4                                    
 693   4      //             forward();
 694   4                    Circulation_wall_right();    
 695   4                  }while(front_dis >188);    ///     åŸ200     ----4.04  188
 696   3                  car_stop();
 697   3                  turn_left_90();
 698   3                  car_stop();
 699   3                // now potion is  door of room 2,and meanwhile at the street 3,next action   walk alone righr wall
 700   3      /////////////           
 701   3      //è¿™æ—¶å°è½¦å¤„äº3#å¤§è¡—ï¼Œå·¡å³å¢™èµ°ï¼Œå¹¶æ‰«æå·¦å¢™ï¼Œç¨³å®šå‘ç°å·¦å¢™
 702   3      ///////////////
 703   3      
 704   3                  left_300=0x00;
 705   3                  do
 706   3                  {
 707   4                    Circulation_wall_right();
 708   4                    left_dis= Ultrasonic_Get_Left();
 709   4                    
 710   4                    if(left_dis<300)
 711   4                    {
 712   5                      left_300++;
 713   5                    }
 714   4                    else
 715   4                    {
 716   5                      left_300=0x00;
 717   5                    }
 718   4                  }
 719   3                  while(left_dis>300||left_300<=3);//front_dis > 580||left_dis <600
 720   3      //            car_stop();
 721   3      //            car_stop();
 722   3                  
 723   3                  
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 13  

 724   3                  
 725   3      /////////////           
 726   3      //è¿™æ—¶å°è½¦å¤„äº3#å¤§è¡—ï¼Œå‘ç°å·¦å¢™ï¼Œå‡†å¤‡å·¡å·¦å¢™èµ°ï¼Œå¹¶åœ¨å‰å¢™170æ¯«ç±³å¤„åœä¸‹
 727   3      ///////////////           
 728   3        
 729   3                  do
 730   3                    
 731   3                  {
 732   4                    Circulation_wall_left();
 733   4                  }while(front_dis >210);   //200å¯ä»¥ä½¿ç”¨   å¯ä»¥è°ƒå¤§ä¸€äº›  ------------æ”¹210  3.24
 734   3                  car_stop();
 735   3                  turn_right_90();
 736   3      /////////////           
 737   3      //è¿™æ—¶å°è½¦å¤„äº2#å¤§è¡—å°½å¤´ï¼Œå‡†å¤‡å·¡å·¦å¢™èµ°ï¼Œå¹¶åœ¨å‰å¢™170æ¯«ç±³å¤„åœä¸‹
 738   3      ///////////////             
 739   3                  do
 740   3                    
 741   3                  {
 742   4                    Circulation_wall_left();
 743   4                  }while(front_dis >210);//åŸæ•°æ®180
 744   3                  car_stop();
 745   3                  turn_right_back_90(); 
*** WARNING C206 IN LINE 745 OF main.c: 'turn_right_back_90': missing function-prototype
 746   3                  
 747   3      /////////////           
 748   3      //è¿™æ—¶å°è½¦å¤„äº1#ç€ç«ç‚¹ï¼Œå‡†å¤‡å·¡å·¦å¢™èµ°ï¼Œå¹¶åœ¨å‰å¢™580æ¯«ç±³å¤„åœä¸‹ï¼Œå¹¶æ‰å¤´ï¼Œä¸ºä¸‹
             -æ¬¡å¯åŠ¨åšå‡†å¤‡
 749   3      /////////////// 
 750   3      only_fire_9_fire_1_is_on_back_home:           
 751   3                  car_stop();
 752   3                  
 753   3      only_fire1_is_on_back_home: 
 754   3                  
 755   3      //            i=0;
 756   3      //            do
 757   3      //            {
 758   3      //              Circulation_wall_left();
 759   3      //            }while(i<=30);
 760   3                  
 761   3                  
 762   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 763   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 764   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 765   3                  front_dis= kalmanfilter(Ultrasonic_Get_Front(),1);
 766   3                  
 767   3                  do
 768   3                  {
 769   4                    Circulation_wall_left();
 770   4                  }while(front_dis >580);
 771   3                  //car_stop();
 772   3                  //car_stop(); 
 773   3      
 774   3                  do
 775   3                    
 776   3                  {
 777   4                    Circulation_wall_left();
 778   4                  }while(front_dis >500);
 779   3      //            car_stop();               
 780   3      
 781   3                  do
 782   3                    
 783   3                  {
C51 COMPILER V9.60.0.0   MAIN                                                              10/20/2023 14:09:50 PAGE 14  

 784   4                    Circulation_wall_left();
 785   4                  }while(front_dis >430);//-------------10.15
 786   3                  do
 787   3                    
 788   3                  {
 789   4                    Circulation_wall_left();
 790   4                  }while(front_dis >430);//-------------10.15
 791   3                  do
 792   3                    
 793   3                  {
 794   4                    Circulation_wall_left();
 795   4                  }while(front_dis >430);//-------------10.15
 796   3                  do
 797   3                    
 798   3                  {
 799   4                    Circulation_wall_left();
 800   4                  }while(front_dis >430);//-------------10.15     
 801   3                  car_stop();
 802   3                  car_stop(); 
 803   3                  delay_ms(100);
 804   3                  car_stop();
 805   3                  while(1);
 806   3                  
 807   3          }
 808   2        }
 809   1      }
 810                
*** WARNING C294 IN LINE 50 OF main.c: unreachable code
*** WARNING C294 IN LINE 86 OF main.c: unreachable code
*** WARNING C294 IN LINE 95 OF main.c: unreachable code
*** WARNING C294 IN LINE 213 OF main.c: unreachable code
*** WARNING C294 IN LINE 222 OF main.c: unreachable code
*** WARNING C294 IN LINE 495 OF main.c: unreachable code
*** WARNING C294 IN LINE 504 OF main.c: unreachable code
*** WARNING C294 IN LINE 554 OF main.c: unreachable code
*** WARNING C294 IN LINE 563 OF main.c: unreachable code
*** WARNING C294 IN LINE 617 OF main.c: unreachable code
*** WARNING C294 IN LINE 626 OF main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     28    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  12 WARNING(S),  0 ERROR(S)
